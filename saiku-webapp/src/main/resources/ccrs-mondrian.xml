<?xml version="1.0" encoding="UTF-8"?>
<Schema name="CCRS" metamodelVersion="4.0"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="mondrian.xsd">
    <Annotations>
        <Annotation name="desc">Cube Schema for CCRS</Annotation>
    </Annotations>

    <PhysicalSchema>
        <!-- Used by Agency which has 90% of all categories-->
        <Table name="CATEGORY">
            <Key>
                <Column name="ID"/>
            </Key>
        </Table>

        <Table name="BASE_COUNTRY">
            <Key>
                <Column name="ISO2"/>
            </Key>
        </Table>

        <Query alias="UNAgency">
            <ExpressionView>
                <SQL dialect="generic">
                    <![CDATA[SELECT ID, LABEL FROM CATEGORY WHERE DTYPE='UNAgency']]>
                </SQL>
            </ExpressionView>
        </Query>

        <Query alias="RepresentativePostLevelCategory">
            <ExpressionView>
                <SQL dialect="generic">
                    <![CDATA[SELECT ID, LABEL FROM CATEGORY WHERE DTYPE='RepresentativePostLevel']]>
                </SQL>
            </ExpressionView>
        </Query>

        <Query alias="OfficeType">
            <ExpressionView>
                <SQL dialect="generic">
                    <![CDATA[SELECT ID, LABEL FROM CATEGORY WHERE DTYPE='OfficeType']]>
                </SQL>
            </ExpressionView>
        </Query>

        <Query alias="ManagementModality">
            <ExpressionView>
                <SQL dialect="generic">
                    <![CDATA[SELECT ID, LABEL FROM CATEGORY WHERE DTYPE='ManagementModality']]>
                </SQL>
            </ExpressionView>
        </Query>

        <Query alias="Level">
            <ExpressionView>
                <SQL dialect="generic">
                    <![CDATA[SELECT ID, LABEL FROM CATEGORY WHERE DTYPE='Level']]>
                </SQL>
            </ExpressionView>
        </Query>

        <Query alias="BusinessOperationArea">
            <ExpressionView>
                <SQL dialect="generic">
                    <![CDATA[SELECT ID, LABEL FROM CATEGORY WHERE DTYPE='BusinessOperationArea']]>
                </SQL>
            </ExpressionView>
        </Query>

        <Query alias="ContractModality">
            <ExpressionView>
                <SQL dialect="generic">
                    <![CDATA[SELECT ID, LABEL FROM CATEGORY WHERE DTYPE='ContractModality']]>
                </SQL>
            </ExpressionView>
        </Query>

        <Query alias="Sector">
            <ExpressionView>
                <SQL dialect="generic">
                    <![CDATA[SELECT ID, LABEL FROM CATEGORY WHERE DTYPE='Sector']]>
                </SQL>
            </ExpressionView>
        </Query>

        <Query alias="UNHRTreatyBody">
            <ExpressionView>
                <SQL dialect="generic">
                    <![CDATA[SELECT ID, LABEL FROM CATEGORY WHERE DTYPE='UNHRTreatyBody']]>
                </SQL>
            </ExpressionView>
        </Query>

        <Query alias="Scorecard">
            <ExpressionView>
                <SQL dialect="generic">
                    <![CDATA[SELECT ID, LABEL FROM CATEGORY WHERE DTYPE='Scorecard']]>
                </SQL>
            </ExpressionView>
        </Query>

        <Query alias="GenderEqualityRating">
            <ExpressionView>
                <SQL dialect="generic">
                    <![CDATA[SELECT ID, LABEL FROM CATEGORY WHERE DTYPE='GenderEqualityRating']]>
                </SQL>
            </ExpressionView>
        </Query>

        <Query alias="CP1UnctMember">
            <ExpressionView>
                <SQL dialect="generic">
                    <![CDATA[select M.*, CP1.DESIGNATION, CP1.ENTITY_YEAR  from CP1UNCTMEMBER M, CP1GENERAL_PROFILE CP1 WHERE M.PARENT_ID=CP1.ID and CP1.WORKFLOW='VALIDATED' AND CP1.DESIGNATION!='AQ']]>
                </SQL>
            </ExpressionView>
        </Query>

        <Query alias="CP2RcoStaffMemberDetail">
            <ExpressionView>
                <SQL dialect="generic">
                    <![CDATA[select D.*, CP2.DESIGNATION, CP2.ENTITY_YEAR FROM CP2RCO_STAFF_MEMBER_DETAIL D,  CP2COORDINATION_CAPACITY CP2 WHERE CP2.ID=D.PARENT_ID AND CP2.WORKFLOW='VALIDATED' AND CP2.DESIGNATION!='AQ']]>
                </SQL>
            </ExpressionView>
        </Query>

        <Query alias="CP3JointProgrammes">
            <ExpressionView>
                <SQL dialect="generic">
                    <![CDATA[select D.*, CP3.DESIGNATION, CP3.ENTITY_YEAR FROM CP3JOINT_PROGRAMMES D,  CP3COMMON_COUNTRY_PROGRAMMING CP3 WHERE CP3.ID=D.PARENT_ID AND CP3.WORKFLOW='VALIDATED' AND CP3.DESIGNATION!='AQ']]>
                </SQL>
            </ExpressionView>
        </Query>

        <Query alias="CP4BusinessOperationAreasDetails">
            <ExpressionView>
                <SQL dialect="generic">
                    <![CDATA[select BOS.*, CP4.DESIGNATION, CP4.ENTITY_YEAR, LTA.LTA_EVALUATED, LTA.MONETARY_VOLUME, LTA.DISCOUNT_RATE_APPLIED, LTA.ANNUAL_VALUE_OF_TOTAL_PROCUREMENT, LTA.MANAGEMENT_MODALITY_ID  from CP4BUSINESS_OPERATION_AREAS_DETAILS BOS, CP4COMMON_SERVICES_HARMONIZED_BUSINES_PRACTICES CP4, CP4LTADETAILS LTA  WHERE LTA.PARENT_ID=BOS.ID AND BOS.PARENT_ID=CP4.ID and CP4.WORKFLOW='VALIDATED' AND CP4.DESIGNATION!='AQ']]>
                </SQL>
            </ExpressionView>
        </Query>

        <Query alias="CP7MDTF">
            <ExpressionView>
                <SQL dialect="generic">
                    <![CDATA[select D.*, CP7.DESIGNATION, CP7.ENTITY_YEAR FROM CP7MTDF D, CP7JOINT_FUNDING_PROFILE CP7 WHERE CP7.ID=D.PARENT_ID AND CP7.WORKFLOW='VALIDATED' AND CP7.DESIGNATION!='AQ']]>
                </SQL>
            </ExpressionView>
        </Query>

        <Query alias="CP11BudgetSupport">
            <ExpressionView>
                <SQL dialect="generic">
                    <![CDATA[select D.*, CP11.DESIGNATION, CP11.ENTITY_YEAR from CP11DEVELOPMENT_EFFECTIVENESS_PROFILE CP11, CP11DIRECT_BUDGET_SUPPORT D WHERE CP11.ID = D.PARENT_ID AND CP11.WORKFLOW='VALIDATED' AND CP11.DESIGNATION != 'AQ']]>
                </SQL>
            </ExpressionView>
        </Query>

        <Query alias="CP12HumanRigthsTreatyBodies">
            <ExpressionView>
                <SQL dialect="generic">
                    <![CDATA[select D.*, CP12.DESIGNATION, CP12.ENTITY_YEAR FROM CP12UNHRTREATY_BODY D, CP12HUMAN_RIGHTS_PROFILE CP12 WHERE CP12.ID=D.PARENT_ID AND CP12.WORKFLOW='VALIDATED' AND CP12.DESIGNATION!='AQ']]>
                </SQL>
            </ExpressionView>
        </Query>

        <Query alias="CP12SpecialProcedureHumanRightsCouncil">
            <ExpressionView>
                <SQL dialect="generic">
                    <![CDATA[select D.*, CP12.DESIGNATION, CP12.ENTITY_YEAR FROM CP12VISIT_OF_SPECIAL_PROCEDUREHRC D, CP12HUMAN_RIGHTS_PROFILE CP12 WHERE CP12.ID=D.PARENT_ID AND CP12.WORKFLOW='VALIDATED' AND CP12.DESIGNATION!='AQ']]>
                </SQL>
            </ExpressionView>
        </Query>

        <Query alias="CP13GenderEqualityScorecard">
            <ExpressionView>
                <SQL dialect="generic">
                    <![CDATA[select D.*, CP13.DESIGNATION, CP13.ENTITY_YEAR FROM CP13SCORECARD_AREA_SCORE D, CP13GENDER_PROFILE CP13 WHERE CP13.ID=D.PARENT_ID AND CP13.WORKFLOW='VALIDATED' AND CP13.DESIGNATION!='AQ']]>
                </SQL>
            </ExpressionView>
        </Query>

        <Query alias="FACT_TABLE">
            <ExpressionView>
                <SQL dialect="generic">
                    <![CDATA[
                    SELECT
                        WORKPLAN.ID as WORKPLAN_ID,
                        WORKPLAN.DESIGNATION as WORKPLAN_DESIGNATION,
                        WORKPLAN.ENTITY_YEAR as WORKPLAN_ENTITY_YEAR,
                        WORKPLAN.WORKFLOW as WORKPLAN_WORKFLOW,
                        WORKSTREAM.ID as WORKSTREAM_ID,
                        OUTPUTS.ID as OUTPUTS_ID,
                        OUTPUTS.ACTUAL_OUTPUT as OUTPUTS_ACTUAL_OUTPUT,
                        OUTPUTS.EXPECTED_OUTPUT as OUTPUTS_EXPECTED_OUTPUT,
                        OUTPUTS.END_DATE as OUTPUTS_END_DATE,
                        OUTPUTS.START_DATE as OUTPUTS_START_DATE,
                        OUTPUTS.LEAD_UNIT_ID as OUTPUTS_LEAD_UNIT_ID,
                        AGENCY_ROLES.LEAD_AGENCY_ID as AGENCY_ROLES_LEAD_AGENCY_ID,
                        AGENCY_ROLES.ROLE_OF_PARTNERS as AGENCY_ROLES_ROLE_OF_PARTNERS,
                        AGENCY_ROLES_PARTNERS.PARTNERS_ID as AGENCY_ROLES_PARTNERS_PARTNERS_ID,
                        ACTIVITY.ID as ACTIVITY_ID,
                        ACTIVITY.ACTUAL_ACTIVITY_PERFORMANCE as ACTIVITY_ACTUAL_ACTIVITY_PERFORMANCE,
                        ACTIVITY.EXPECTED_ACTIVITY as ACTIVITY_EXPECTED_ACTIVITY,
                        ACTIVITY.END_DATE as ACTIVITY_END_DATE,
                        ACTIVITY.START_DATE as ACTIVITY_START_DATE,
                        ACTIVITY.LEAD_UNIT_ID as ACTIVITY_LEAD_UNIT_ID,
                        ACTIVITY.SELECT_AS_GOOD_PRACTICE as ACTIVITY_SELECT_AS_GOOD_PRACTICE,
                        ACTIVITY.SELECT_AS_GOOD_PRACTICE as ACTIVITY_GOOD_PRACTICE_ID,
                        BUDGET.ID as BUDGET_ID,
                        BUDGET.TYPE_ID as BUDGET_TYPE_ID,
                        BUDGET.REQUIRED_AMOUNT as BUDGET_EXPECTED,
                        BUDGET.SPENT_AMOUNT as BUDGET_ACTUAL
                    FROM WORKPLAN workplan
                        LEFT OUTER JOIN WORKSTREAM workstream ON workstream.WORKPLAN_ID = workplan.ID
                        LEFT OUTER JOIN OUTPUTS outputs ON outputs.WORKSTREAM_ID = workstream.ID
                        LEFT OUTER JOIN AGENCY_ROLES agency_roles ON agency_roles.OUTPUT_ID = outputs.ID
                        LEFT OUTER JOIN AGENCY_ROLES_PARTNERS agency_roles_partners ON agency_roles_partners.AGENCY_ROLES_ID = agency_roles.ID
                        LEFT OUTER JOIN ACTIVITY activity ON activity.OUTPUT_ID = outputs.ID
                        LEFT OUTER JOIN BUDGET budget ON budget.ACTIVITY_ID = activity.ID
                    WHERE
                        workplan.DESIGNATION != 'AQ'
                    ]]>
                </SQL>
            </ExpressionView>
        </Query>
    </PhysicalSchema>

    <!--*************************************************************************
    ***** CP1 UNCT Members
    *************************************************************************-->
    <Cube name="CP1 UNCT Members" caption="CP1 UNCT Members" visible="true"
          cache="true" enabled="true">
        <Dimensions>
            <Dimension name="Country" caption="Country" table="BASE_COUNTRY"
                       key="Dimension Id" visible="true">
                <Attributes>
                    <Attribute name="Dimension Id" keyColumn="ISO2"
                               hasHierarchy="false" levelType="Regular" datatype="Integer" />

                    <Attribute name="Country" caption="Country" keyColumn="NAME"
                               hierarchyAllMemberName="All Countries" hierarchyCaption="All Countries"
                               levelType="Regular" datatype="String" />
                </Attributes>
            </Dimension>

            <Dimension name="Year" caption="Year" table="CP1UnctMember"
                       visible="true">
                <Attributes>
                    <Attribute name="Year" keyColumn="ENTITY_YEAR" datatype="Integer" />
                </Attributes>
            </Dimension>

            <Dimension name="UNAgency" caption="UNAgency" table="UNAgency"
                       key="Dimension Id" visible="true">
                <Attributes>
                    <Attribute name="Dimension Id" keyColumn="ID"
                               hasHierarchy="false" levelType="Regular" datatype="Integer" />

                    <Attribute name="Agency" caption="Agency" keyColumn="LABEL"
                               hierarchyAllMemberName="All Agencies" hierarchyCaption="All Agencies"
                               levelType="Regular" datatype="String" />
                </Attributes>
            </Dimension>

            <Dimension name="RepresentativePostLevel" caption="Representative Post Level"
                       table="RepresentativePostLevelCategory" key="Dimension Id" visible="true">
                <Attributes>
                    <Attribute name="Dimension Id" keyColumn="ID"
                               hasHierarchy="false" levelType="Regular" datatype="Integer" />

                    <Attribute name="RepresentativePostLevel" caption="Representative Post Level"
                               keyColumn="LABEL" hierarchyAllMemberName="All Representative Post Levels"
                               hierarchyCaption="All Representative Post Levels" levelType="Regular"
                               datatype="String" />
                </Attributes>
            </Dimension>
        </Dimensions>

        <MeasureGroups>
            <MeasureGroup name="CP UNCT Measures" table="CP1UnctMember">
                <Measures>
                    <Measure name="Count" caption="Number of UNCT Members" column="ID" datatype="Integer"
                             aggregator="distinct-count" visible="true" formatString="#,###"/>
                    <Measure name="NRA" caption="Non-Resident Agency Count" column="NON_RESIDENT_AGENCY"
                             datatype="Integer" aggregator="count" visible="true" />
                </Measures>
                <DimensionLinks>
                    <ForeignKeyLink dimension="UNAgency" foreignKeyColumn="AGENCY_ID" />
                    <ForeignKeyLink dimension="RepresentativePostLevel"
                                    foreignKeyColumn="REPRESENTATIVE_POST_LEVEL_ID" />
                    <ForeignKeyLink dimension="Country" foreignKeyColumn="DESIGNATION"/>
                    <FactLink dimension="Year" />
                </DimensionLinks>
            </MeasureGroup>
        </MeasureGroups>
    </Cube>

    <!--*************************************************************************
    ***** CP2 RCO Staff Member Details
    *************************************************************************-->
    <Cube name="CP2RCOStaffMemberDetails" caption="CP2 RCO Staff Member Details" visible="true" cache="true" enabled="true">
        <Dimensions>
            <Dimension name="Country" caption="Country" table="BASE_COUNTRY"
                       key="Dimension Id" visible="true">
                <Attributes>
                    <Attribute name="Dimension Id" keyColumn="ISO2"
                               hasHierarchy="false" levelType="Regular" datatype="Integer" />

                    <Attribute name="Country" caption="Country" keyColumn="NAME"
                               hierarchyAllMemberName="All Countries" hierarchyCaption="All Countries"
                               levelType="Regular" datatype="String" />
                </Attributes>
            </Dimension>

            <Dimension name="Year" caption="Year" table="CP2RcoStaffMemberDetail" visible="true">
                <Attributes>
                    <Attribute name="Year" keyColumn="ENTITY_YEAR" datatype="Integer" />
                </Attributes>
            </Dimension>

            <Dimension name="OfficeType" caption="Office Type"  table="OfficeType"
                       key="Dimension Id" visible="true">
                <Attributes>
                    <Attribute name="Dimension Id" keyColumn="ID" hasHierarchy="false"
                               levelType="Regular" datatype="Integer" />

                    <Attribute name="OfficeType" caption="Office Type" keyColumn="LABEL"
                               hierarchyAllMemberName="All Office Types" hierarchyCaption="All Office Types"
                               levelType="Regular" datatype="String" />
                </Attributes>
            </Dimension>

            <Dimension name="ContractModality" caption="Contract Modality" table="ContractModality"
                       key="Dimension Id" visible="true">
                <Attributes>
                    <Attribute name="Dimension Id" keyColumn="ID" hasHierarchy="false"
                               levelType="Regular" datatype="Integer" />

                    <Attribute name="ContractModality" caption="Contract Modality" keyColumn="LABEL"
                               hierarchyAllMemberName="All Contract Modality" hierarchyCaption="All Contract Modality"
                               levelType="Regular" datatype="String" />
                </Attributes>
            </Dimension>

            <Dimension name="Level" caption="Level" table="Level" key="Dimension Id" visible="true">
                <Attributes>
                    <Attribute name="Dimension Id" keyColumn="ID" hasHierarchy="false"
                               levelType="Regular" datatype="Integer" />

                    <Attribute name="Level" caption="Level" keyColumn="LABEL"
                               hierarchyAllMemberName="All Levels" hierarchyCaption="All Levels"
                               levelType="Regular" datatype="String" />
                </Attributes>
            </Dimension>

        </Dimensions>

        <MeasureGroups>
            <MeasureGroup name="CP2 RCOStaffMemberDetails Measures" table="CP2RcoStaffMemberDetail">
                <Measures>
                    <Measure name="Count" caption="Number of RCO Staff Members" column="ID" datatype="Integer"
                             aggregator="distinct-count" visible="true" formatString="#,###"/>

                    <Measure name="AverageAnnualNetSalaryAmount" caption="Average Annual Net Salary Amount"
                             column="ANNUAL_SALARY_AMOUNT" datatype="Numeric" aggregator="avg" visible="true" />

                    <Measure name="TotalAnnualNetSalaryAmount" caption="Total Annual Net Salary Amount"
                             column="ANNUAL_SALARY_AMOUNT" datatype="Numeric" aggregator="sum" visible="true" />

                    <Measure name="AverageContractDurationYears" caption="Average Contract Duration Years"
                             column="CONTRACT_DURATION_YEARS" datatype="Numeric" aggregator="avg" visible="true" />
                </Measures>

                <DimensionLinks>
                    <ForeignKeyLink dimension="OfficeType" foreignKeyColumn="OFFICE_TYPE_ID"/>
                    <ForeignKeyLink dimension="ContractModality" foreignKeyColumn="CONTRACT_MODALITY_ID"/>
                    <ForeignKeyLink dimension="Level" foreignKeyColumn="LEVEL_ID"/>
                    <ForeignKeyLink dimension="Country" foreignKeyColumn="DESIGNATION"/>
                    <FactLink dimension="Year" />
                </DimensionLinks>
            </MeasureGroup>
        </MeasureGroups>
    </Cube>

    <!--*************************************************************************
    ***** CP3 Joint Programmes
    *************************************************************************-->
    <Cube name="CP3 Joint Programmes" caption="CP3 Joint Programmes" visible="true"
          cache="true" enabled="true">
        <Dimensions>
            <Dimension name="Country" caption="Country" table="BASE_COUNTRY"
                       key="Dimension Id" visible="true">
                <Attributes>
                    <Attribute name="Dimension Id" keyColumn="ISO2"
                               hasHierarchy="false" levelType="Regular" datatype="Integer" />

                    <Attribute name="Country" caption="Country" keyColumn="NAME"
                               hierarchyAllMemberName="All Countries" hierarchyCaption="All Countries"
                               levelType="Regular" datatype="String" />
                </Attributes>
            </Dimension>

            <Dimension name="Year" caption="Year" table="CP3JointProgrammes"
                       visible="true">
                <Attributes>
                    <Attribute name="Year" keyColumn="ENTITY_YEAR" datatype="Integer" />
                </Attributes>
            </Dimension>

            <Dimension name="Title" caption="Title of Joint Programme" table="CP3JointProgrammes"
                       visible="true">
                <Attributes>
                    <Attribute name="Title" caption="Title" keyColumn="TITLE"
                               levelType="Regular" datatype="String" />
                </Attributes>
            </Dimension>

        </Dimensions>

        <MeasureGroups>
            <MeasureGroup name="CP Joint Programmes Measures" table="CP3JointProgrammes">
                <Measures>
                    <Measure name="Count" caption="Number of UNCT Members" column="ID" datatype="Integer"
                             aggregator="distinct-count" visible="true" formatString="#,###"/>
                    <Measure name="Total Budget" caption="Total Budget (Currency USD)" column="TOTAL_BUDGET"
                             datatype="Numeric" aggregator="sum" visible="true" />
                </Measures>
                <DimensionLinks>
                    <FactLink dimension="Title"/>
                    <ForeignKeyLink dimension="Country" foreignKeyColumn="DESIGNATION"/>
                    <FactLink dimension="Year" />
                </DimensionLinks>
            </MeasureGroup>
        </MeasureGroups>
    </Cube>

    <!--*************************************************************************
    ***** CP4 Business Operation Areas
    *************************************************************************-->
    <Cube name="CP4BOSAreas" caption="CP4 Business Operation Areas" visible="true" cache="true" enabled="true">
        <Dimensions>
            <Dimension name="Country" caption="Country" table="BASE_COUNTRY"
                       key="Dimension Id" visible="true">
                <Attributes>
                    <Attribute name="Dimension Id" keyColumn="ISO2"
                               hasHierarchy="false" levelType="Regular" datatype="Integer" />

                    <Attribute name="Country" caption="Country" keyColumn="NAME"
                               hierarchyAllMemberName="All Countries" hierarchyCaption="All Countries"
                               levelType="Regular" datatype="String" />
                </Attributes>
            </Dimension>

            <Dimension name="Year" caption="Year" table="CP4BusinessOperationAreasDetails"
                       visible="true">
                <Attributes>
                    <Attribute name="Year" keyColumn="ENTITY_YEAR" datatype="Integer" />
                </Attributes>
            </Dimension>

            <Dimension name="BusinessOperationArea" caption="Business Operation Area" table="BusinessOperationArea"
                       key="Dimension Id" visible="true">
                <Attributes>
                    <Attribute name="Dimension Id" keyColumn="ID" hasHierarchy="false"
                               levelType="Regular" datatype="Integer" />

                    <Attribute name="BusinessOperationArea" caption="Business Operation Area" keyColumn="LABEL"
                               hierarchyAllMemberName="All Business Operation Area" hierarchyCaption="Business Operation Areas"
                               levelType="Regular" datatype="String" />
                </Attributes>
            </Dimension>

            <Dimension name="ManagementModality" caption="Management Modality" table="ManagementModality"
                       key="Dimension Id" visible="true">
                <Attributes>
                    <Attribute name="Dimension Id" keyColumn="ID" hasHierarchy="false"
                               levelType="Regular" datatype="Integer" />

                    <Attribute name="ManagementModality" caption="Management Modality" keyColumn="LABEL"
                               hierarchyAllMemberName="All Management Modalities" hierarchyCaption="Management Modalities"
                               levelType="Regular" datatype="String" />
                </Attributes>
            </Dimension>
        </Dimensions>

        <MeasureGroups>
            <MeasureGroup name="CP4 BOS Areas Measures" table="CP4BusinessOperationAreasDetails">
                <Measures>
                    <Measure name="Count" caption="Number of Business Operation Areas" column="ID" datatype="Integer"
                             aggregator="distinct-count" visible="true" formatString="#,###"/>

                    <Measure name="hasMOU" caption="Count of MOUs in Place" column="HASMOU"
                             datatype="Integer" aggregator="count" visible="true" />

                    <Measure name="hasLTA" caption="Count of LTA" column="HASLTA"
                             datatype="Integer" aggregator="count" visible="true" />

                    <Measure name="ltaEvaluated" caption="Count of LTA evaluated" column="LTA_EVALUATED"
                             datatype="Integer" aggregator="count" visible="true" />

                    <Measure name="monetaryVolume" caption="Monetary Volume of LTAs" column="MONETARY_VOLUME"
                             datatype="Numeric" aggregator="sum" visible="true" />

                    <Measure name="annualValueOfTotalProcurement" caption="Annual Value of Total Procuremen" column="ANNUAL_VALUE_OF_TOTAL_PROCUREMENT"
                             datatype="Numeric" aggregator="sum" visible="true" />
                </Measures>

                <DimensionLinks>
                    <ForeignKeyLink dimension="BusinessOperationArea" foreignKeyColumn="BUSINESS_OPERATION_AREA_ID" />
                    <ForeignKeyLink dimension="ManagementModality" foreignKeyColumn="MANAGEMENT_MODALITY_ID" />
                    <ForeignKeyLink dimension="Country" foreignKeyColumn="DESIGNATION"/>
                    <FactLink dimension="Year" />
                </DimensionLinks>
            </MeasureGroup>
        </MeasureGroups>
    </Cube>

    <!--*************************************************************************
    ***** CP7 MDTF
    *************************************************************************-->
    <Cube name="CP7MDTF" caption="CP7 MDTF" visible="true"
          cache="true" enabled="true">
        <Dimensions>
            <Dimension name="Country" caption="Country" table="BASE_COUNTRY"
                       key="Dimension Id" visible="true">
                <Attributes>
                    <Attribute name="Dimension Id" keyColumn="ISO2"
                               hasHierarchy="false" levelType="Regular" datatype="Integer" />

                    <Attribute name="Country" caption="Country" keyColumn="NAME"
                               hierarchyAllMemberName="All Countries" hierarchyCaption="All Countries"
                               levelType="Regular" datatype="String" />
                </Attributes>
            </Dimension>

            <Dimension name="Year" caption="Year" table="CP7MDTF"
                       visible="true">
                <Attributes>
                    <Attribute name="Year" keyColumn="ENTITY_YEAR" datatype="Integer" />
                </Attributes>
            </Dimension>

        </Dimensions>

        <MeasureGroups>
            <MeasureGroup name="CP MDTF Measures" table="CP7MDTF">
                <Measures>
                    <Measure name="Count" caption="Number of MDTFs" column="ID" datatype="Integer"
                             aggregator="distinct-count" visible="true" formatString="#,###"/>
                    <Measure name="Total Budget" caption="Total Budget (Currency USD)" column="TOTAL_BUDGET"
                             datatype="Numeric" aggregator="sum" visible="true" />
                </Measures>
                <DimensionLinks>
                    <ForeignKeyLink dimension="Country" foreignKeyColumn="DESIGNATION"/>
                    <FactLink dimension="Year" />
                </DimensionLinks>
            </MeasureGroup>
        </MeasureGroups>
    </Cube>

    <!--*************************************************************************
    ***** CP11 Budget Support
    *************************************************************************-->
    <Cube name="CP11 Budget Support" caption="CP11 Budget Support" visible="true"
          cache="true" enabled="true">
        <Dimensions>
            <Dimension name="Country" caption="Country" table="BASE_COUNTRY"
                       key="Dimension Id" visible="true">
                <Attributes>
                    <Attribute name="Dimension Id" keyColumn="ISO2"
                               hasHierarchy="false" levelType="Regular" datatype="Integer" />

                    <Attribute name="Country" caption="Country" keyColumn="NAME"
                               hierarchyAllMemberName="All Countries" hierarchyCaption="All Countries"
                               levelType="Regular" datatype="String" />
                </Attributes>
            </Dimension>

            <Dimension name="Year" caption="Year" table="CP11BudgetSupport"
                       visible="true">
                <Attributes>
                    <Attribute name="Year" keyColumn="ENTITY_YEAR" datatype="Integer" />
                </Attributes>
            </Dimension>

            <Dimension name="Sector" caption="Sector" table="Sector"
                       key="Dimension Id" visible="true">
                <Attributes>
                    <Attribute name="Dimension Id" keyColumn="ID"
                               hasHierarchy="false" levelType="Regular" datatype="Integer" />

                    <Attribute name="Sector" caption="Sector" keyColumn="LABEL"
                               hierarchyAllMemberName="All Sectors" hierarchyCaption="All Sectors"
                               levelType="Regular" datatype="String" />
                </Attributes>
            </Dimension>
        </Dimensions>

        <MeasureGroups>
            <MeasureGroup name="CP Budget Support Measures" table="CP11BudgetSupport">
                <Measures>
                    <Measure name="Count" caption="Number of Budget Supports" column="ID" datatype="Integer"
                             aggregator="distinct-count" visible="true" formatString="#,###"/>

                    <Measure name="Budget Support" caption="Budget Support" column="BUDGETED_AMOUNT"
                             datatype="Numeric" aggregator="sum" visible="true" />
                </Measures>
                <DimensionLinks>
                    <ForeignKeyLink dimension="Sector" foreignKeyColumn="SECTOR_ID" />
                    <ForeignKeyLink dimension="Country" foreignKeyColumn="DESIGNATION"/>
                    <FactLink dimension="Year" />
                </DimensionLinks>
            </MeasureGroup>
        </MeasureGroups>
    </Cube>

    <!--*************************************************************************
    ***** CP12 Human Rigths Treaty Bodies
    *************************************************************************-->
    <Cube name="CP12 Human Rigths Treaty Bodies" caption="CP12 Human Rigths Treaty Bodies" visible="true"
          cache="true" enabled="true">
        <Dimensions>
            <Dimension name="Country" caption="Country" table="BASE_COUNTRY"
                       key="Dimension Id" visible="true">
                <Attributes>
                    <Attribute name="Dimension Id" keyColumn="ISO2"
                               hasHierarchy="false" levelType="Regular" datatype="Integer" />

                    <Attribute name="Country" caption="Country" keyColumn="NAME"
                               hierarchyAllMemberName="All Countries" hierarchyCaption="All Countries"
                               levelType="Regular" datatype="String" />
                </Attributes>
            </Dimension>

            <Dimension name="Year" caption="Year" table="CP12HumanRigthsTreatyBodies"
                       visible="true">
                <Attributes>
                    <Attribute name="Year" keyColumn="ENTITY_YEAR" datatype="Integer" />
                </Attributes>
            </Dimension>

            <Dimension name="UNHRTreatyBody" caption="UN HR Treaty Body" table="UNHRTreatyBody"
                       key="Dimension Id" visible="true">
                <Attributes>
                    <Attribute name="Dimension Id" keyColumn="ID"
                               hasHierarchy="false" levelType="Regular" datatype="Integer" />

                    <Attribute name="UN HR Treaty Body" caption="UN HR Treaty Body" keyColumn="LABEL"
                               hierarchyAllMemberName="All UNHRTreatyBody" hierarchyCaption="All UNHRTreatyBody"
                               levelType="Regular" datatype="String" />
                </Attributes>
            </Dimension>
        </Dimensions>

        <MeasureGroups>
            <MeasureGroup name="CP Human Rigths Treaty Bodies Measures" table="CP12HumanRigthsTreatyBodies">
                <Measures>
                    <Measure name="Count" caption="Number of Human Rigths Measures" column="ID" datatype="Integer"
                             aggregator="distinct-count" visible="true" formatString="#,###"/>
                    <Measure name="hasEngagedDevelopNatlCapacityToReport" caption="Count of UNCT engaged in developing national capacity to develop a report to the treaty body" column="HAS_ENGAGED_DEVELOP_NATL_CAPACITY_TO_REPORT"
                             datatype="Integer" aggregator="count" visible="true" />
                    <Measure name="hasFacilitatedFollowupRecommendations" caption="Count of UNCT facilitated follow up of the recommendations by the Government" column="HAS_FACILITATED_FOLLOWUP_RECOMMENDATIONS"
                             datatype="Integer" aggregator="count" visible="true" />
                </Measures>
                <DimensionLinks>
                    <ForeignKeyLink dimension="UNHRTreatyBody" foreignKeyColumn="UNHR_TREATY_BODY_TYPE_ID" />
                    <ForeignKeyLink dimension="Country" foreignKeyColumn="DESIGNATION"/>
                    <FactLink dimension="Year" />
                </DimensionLinks>
            </MeasureGroup>
        </MeasureGroups>
    </Cube>

    <!--*************************************************************************
    ***** CP12 Special Procedure of Human Rights Council
    *************************************************************************-->
    <Cube name="CP12 Special Procedure of Human Rights Council" caption="CP12 Special Procedure of Human Rights Council" visible="true"
          cache="true" enabled="true">
        <Dimensions>
            <Dimension name="Country" caption="Country" table="BASE_COUNTRY"
                       key="Dimension Id" visible="true">
                <Attributes>
                    <Attribute name="Dimension Id" keyColumn="ISO2"
                               hasHierarchy="false" levelType="Regular" datatype="Integer" />

                    <Attribute name="Country" caption="Country" keyColumn="NAME"
                               hierarchyAllMemberName="All Countries" hierarchyCaption="All Countries"
                               levelType="Regular" datatype="String" />
                </Attributes>
            </Dimension>

            <Dimension name="Year" caption="Year" table="CP12SpecialProcedureHumanRightsCouncil"
                       visible="true">
                <Attributes>
                    <Attribute name="Year" keyColumn="ENTITY_YEAR" datatype="Integer" />
                </Attributes>
            </Dimension>

            <Dimension name="Name" caption="Name of special procedure" table="CP12SpecialProcedureHumanRightsCouncil"
                       visible="true">
                <Attributes>
                    <Attribute name="Name" caption="Name" keyColumn="NAME"
                               levelType="Regular" datatype="String" />
                </Attributes>
            </Dimension>
        </Dimensions>

        <MeasureGroups>
            <MeasureGroup name="CP Special Procedure of Human Rights Council" table="CP12SpecialProcedureHumanRightsCouncil">
                <Measures>
                    <Measure name="Count" caption="Number of Special Procedure of HRC" column="ID" datatype="Integer"
                             aggregator="distinct-count" visible="true" formatString="#,###"/>
                    <Measure name="unctSupported" caption="Count of UNCT support this visit" column="UNCT_SUPPORTED"
                             datatype="Integer" aggregator="count" visible="true" />
                    <Measure name="hasFacilitatedFollowupRecommendations" caption="Count of UNCT facilitate follow up of the recommendations by the Government" column="HAS_FACILITATED_FOLLOWUP_RECOMMENDATIONS"
                             datatype="Integer" aggregator="count" visible="true" />
                </Measures>
                <DimensionLinks>
                    <ForeignKeyLink dimension="Country" foreignKeyColumn="DESIGNATION"/>
                    <FactLink dimension="Year" />
                    <FactLink dimension="Name" />
                </DimensionLinks>
            </MeasureGroup>
        </MeasureGroups>
    </Cube>

    <!--*************************************************************************
    ***** CP13 Gender Equality Scorecard
    *************************************************************************-->
    <Cube name="CP13 Gender Equality Scorecard" caption="CP13 Gender Equality Scorecard" visible="true"
          cache="true" enabled="true">
        <Dimensions>
            <Dimension name="Country" caption="Country" table="BASE_COUNTRY"
                       key="Dimension Id" visible="true">
                <Attributes>
                    <Attribute name="Dimension Id" keyColumn="ISO2"
                               hasHierarchy="false" levelType="Regular" datatype="Integer" />

                    <Attribute name="Country" caption="Country" keyColumn="NAME"
                               hierarchyAllMemberName="All Countries" hierarchyCaption="All Countries"
                               levelType="Regular" datatype="String" />
                </Attributes>
            </Dimension>

            <Dimension name="Year" caption="Year" table="CP13GenderEqualityScorecard"
                       visible="true">
                <Attributes>
                    <Attribute name="Year" keyColumn="ENTITY_YEAR" datatype="Integer" />
                </Attributes>
            </Dimension>

            <Dimension name="Scorecard" caption="Scorecard" table="Scorecard"
                       key="Dimension Id" visible="true">
                <Attributes>
                    <Attribute name="Dimension Id" keyColumn="ID"
                               hasHierarchy="false" levelType="Regular" datatype="Integer" />

                    <Attribute name="Scorecard" caption="Scorecard" keyColumn="LABEL"
                               hierarchyAllMemberName="All Scorecards" hierarchyCaption="All Scorecards"
                               levelType="Regular" datatype="String" />
                </Attributes>
            </Dimension>

            <Dimension name="GenderEqualityRating" caption="GenderEqualityRating" table="GenderEqualityRating"
                       key="Dimension Id" visible="true">
                <Attributes>
                    <Attribute name="Dimension Id" keyColumn="ID"
                               hasHierarchy="false" levelType="Regular" datatype="Integer" />

                    <Attribute name="GenderEqualityRating" caption="GenderEqualityRating" keyColumn="LABEL"
                               hierarchyAllMemberName="All GenderEqualityRatings" hierarchyCaption="All GenderEqualityRatings"
                               levelType="Regular" datatype="String" />
                </Attributes>
            </Dimension>
        </Dimensions>

        <MeasureGroups>
            <MeasureGroup name="CP Gender Equality Scorecard" table="CP13GenderEqualityScorecard">
                <Measures>
                    <Measure name="Count" caption="Number of Gender Equality Scorecard" column="ID" datatype="Integer"
                             aggregator="distinct-count" visible="true" formatString="#,###"/>
                    <Measure name="hasUNCTDevelopedManagementPlan" caption="Count of UNCT address the recommendations for the scorecard" column="HASUNCTDEVELOPED_MANAGEMENT_PLAN"
                             datatype="Integer" aggregator="count" visible="true" />
                </Measures>
                <DimensionLinks>
                    <ForeignKeyLink dimension="Scorecard" foreignKeyColumn="SCORECARD_ID" />
                    <ForeignKeyLink dimension="GenderEqualityRating" foreignKeyColumn="GENDER_EQUALITY_RATING_ID" />
                    <ForeignKeyLink dimension="Country" foreignKeyColumn="DESIGNATION"/>
                    <FactLink dimension="Year" />
                </DimensionLinks>
            </MeasureGroup>
        </MeasureGroups>
    </Cube>

    <!--*************************************************************************
    ***** Test Cube
    *************************************************************************-->
    <Cube name="CCRS Analysis" caption="CCRS Analysis (TEST)" visible="true" cache="true" enabled="true">
        <!-- Define dimensions and attributes -->
        <Dimensions>
            <Dimension name="Workflow" caption="Workflow" table='FACT_TABLE' key="Dimension Id" visible="true">
                <Attributes>
                    <!-- by default we also have visible="false" when hasHierarchy="false" -->
                    <Attribute name="Dimension Id" keyColumn="WORKPLAN_ID"
                               hasHierarchy="false"
                               levelType="Regular" datatype="Integer"/>

                    <Attribute name="Workflow" caption="Workflow" keyColumn="WORKPLAN_WORKFLOW"
                               hierarchyAllMemberName="All workflows" hierarchyCaption="All workflows"
                               levelType="Regular" datatype="String"/>
                </Attributes>
            </Dimension>

            <Dimension name="Country" caption="Country" table="BASE_COUNTRY"
                       key="Dimension Id" visible="true">
                <Attributes>
                    <Attribute name="Dimension Id" keyColumn="ISO2"
                               hasHierarchy="false" levelType="Regular" datatype="Integer" />

                    <Attribute name="Country" caption="Country" keyColumn="NAME"
                               hierarchyAllMemberName="All Countries" hierarchyCaption="All Countries"
                               levelType="Regular" datatype="String" />
                </Attributes>
            </Dimension>

            <Dimension name="Time" table='FACT_TABLE' key="Year Id" type="TIME">
                <Attributes>
                    <Attribute name="Year Id" keyColumn="WORKPLAN_ID"
                               hasHierarchy="false"
                               levelType="Regular" datatype="Integer"/>

                    <Attribute name="Year" caption="Year" keyColumn="WORKPLAN_ENTITY_YEAR"
                               hierarchyAllMemberName="All Years" hierarchyCaption="All Years"
                               levelType="TimeYears" datatype="Integer"/>
                </Attributes>
            </Dimension>

            <Dimension name="Actual Output" table='FACT_TABLE' key="Dimension Id" type="TIME">
                <Attributes>
                    <Attribute name="Dimension Id" keyColumn="OUTPUTS_ID"
                               hasHierarchy="false"
                               levelType="Regular" datatype="Integer"/>

                    <Attribute name="Actual Output" caption="Actual Output" keyColumn="OUTPUTS_ACTUAL_OUTPUT"
                               hierarchyAllMemberName="All Actual Outputs" hierarchyCaption="All Actual Outputs"
                               levelType="Regular" datatype="String"/>
                </Attributes>
            </Dimension>

            <!--<Dimension name="Expected Output" table='FACT_TABLE' key="Dimension Id" type="TIME">-->
                <!--<Attributes>-->
                    <!--<Attribute name="Dimension Id" keyColumn="OUTPUTS_ID"-->
                               <!--hasHierarchy="false"-->
                               <!--levelType="Regular" datatype="Integer"/>-->

                    <!--<Attribute name="Expected Output" caption="Expected Output" keyColumn="OUTPUTS_EXPECTED_OUTPUT"-->
                               <!--hierarchyAllMemberName="All Expected Outputs" hierarchyCaption="All Expected Outputs"-->
                               <!--levelType="Regular" datatype="String"/>-->
                <!--</Attributes>-->
            <!--</Dimension>-->

            <Dimension name="Lead Agency" caption="Lead Agency" table='CATEGORY' key="Dimension Id" visible="true">
                <Attributes>
                    <Attribute name="Dimension Id" keyColumn="ID"
                               hasHierarchy="false"
                               levelType="Regular" datatype="Integer"/>

                    <Attribute name="Lead Agency" caption="Lead Agency" keyColumn="LABEL"
                               hierarchyAllMemberName="All Lead Agencies" hierarchyCaption="All Lead Agencies"
                               levelType="Regular" datatype="String"/>
                </Attributes>
            </Dimension>

            <Dimension name="Partners" caption="Partners" table='CATEGORY' key="Dimension Id" visible="true">
                <Attributes>
                    <Attribute name="Dimension Id" keyColumn="ID"
                               hasHierarchy="false"
                               levelType="Regular" datatype="Integer"/>

                    <Attribute name="Partners" caption="Partners" keyColumn="LABEL"
                               hierarchyAllMemberName="All Partners" hierarchyCaption="All Partners"
                               levelType="Regular" datatype="String"/>
                </Attributes>
            </Dimension>

            <Dimension name="Role of partners" table='FACT_TABLE' key="Dimension Id">
                <Attributes>
                    <Attribute name="Dimension Id" keyColumn="AGENCY_ROLES_LEAD_AGENCY_ID"
                               hasHierarchy="false"
                               levelType="Regular" datatype="Integer"/>

                    <Attribute name="Role of partners" caption="Role of partners" keyColumn="AGENCY_ROLES_ROLE_OF_PARTNERS"
                               hierarchyAllMemberName="All roles" hierarchyCaption="All roles"
                               levelType="Regular" datatype="String"/>
                </Attributes>
            </Dimension>

            <!--<Dimension name="Expected activity performance" table='FACT_TABLE' key="Dimension Id">-->
                <!--<Attributes>-->
                    <!--<Attribute name="Dimension Id" keyColumn="ACTIVITY_ID"-->
                               <!--hasHierarchy="false"-->
                               <!--levelType="Regular" datatype="Integer"/>-->

                    <!--<Attribute name="Expected activity performance" caption="Expected activity performance" keyColumn="ACTIVITY_EXPECTED_ACTIVITY"-->
                               <!--hierarchyAllMemberName="All performance" hierarchyCaption="All performance"-->
                               <!--levelType="Regular" datatype="String"/>-->
                <!--</Attributes>-->
            <!--</Dimension>-->

            <!--<Dimension name="Actual activity performance" table='FACT_TABLE' key="Dimension Id">-->
                <!--<Attributes>-->
                    <!--<Attribute name="Dimension Id" keyColumn="ACTIVITY_ID"-->
                               <!--hasHierarchy="false"-->
                               <!--levelType="Regular" datatype="Integer"/>-->

                    <!--<Attribute name="Actual activity performance" caption="Actual activity performance" keyColumn="ACTIVITY_ACTUAL_ACTIVITY_PERFORMANCE"-->
                               <!--hierarchyAllMemberName="All performance" hierarchyCaption="All performance"-->
                               <!--levelType="Regular" datatype="String"/>-->
                <!--</Attributes>-->
            <!--</Dimension>-->

            <Dimension name="Is good practice?" table='FACT_TABLE' key="Dimension Id">
                <Attributes>
                    <Attribute name="Dimension Id" keyColumn="ACTIVITY_ID"
                               hasHierarchy="false"
                               levelType="Regular" datatype="Integer"/>

                    <Attribute name="Is good practice?" caption="Is good practice?" keyColumn="ACTIVITY_SELECT_AS_GOOD_PRACTICE"
                               hierarchyAllMemberName="All good practice" hierarchyCaption="All good practice"
                               levelType="Regular" datatype="Boolean"/>
                </Attributes>
            </Dimension>

            <Dimension name="Budget Type" caption="Budget Type" table='CATEGORY' key="Dimension Id" visible="true">
                <Attributes>
                    <Attribute name="Dimension Id" keyColumn="ID"
                               hasHierarchy="false"
                               levelType="Regular" datatype="Integer"/>

                    <Attribute name="Budget Type" caption="Budget Type" keyColumn="LABEL"
                               hierarchyAllMemberName="All budget types" hierarchyCaption="All budget types"
                               levelType="Regular" datatype="String"/>
                </Attributes>
            </Dimension>

        </Dimensions>

        <!-- Define Measures -->
        <MeasureGroups>
            <MeasureGroup name="Workplan Measures" table="FACT_TABLE">
                <Measures>
                    <Measure name="Count" caption="Number of forms" column="WORKPLAN_ID" datatype="Integer" aggregator="distinct-count" visible="true" formatString="#,###"/>
                    <Measure name="Expected Budget" caption="Expected Budget" column="BUDGET_EXPECTED" datatype="Numeric" aggregator="sum" visible="true" formatString="#,###"/>
                    <Measure name="Actual Budget" caption="Actual Budget" column="BUDGET_ACTUAL" datatype="Numeric" aggregator="sum" visible="true" formatString="#,###"/>
                </Measures>
                <DimensionLinks>
                    <FactLink dimension="Workflow" />
                    <FactLink dimension="Time" />
                    <ForeignKeyLink dimension="Country" foreignKeyColumn="WORKPLAN_DESIGNATION"/>
                    <FactLink dimension="Actual Output" />
                    <!--<FactLink dimension="Expected Output" />-->
                    <FactLink dimension="Role of partners" />
                    <!--<FactLink dimension="Expected activity performance" />-->
                    <!--<FactLink dimension="Actual activity performance" />-->
                    <FactLink dimension="Is good practice?" />
                    <ForeignKeyLink dimension="Lead Agency" foreignKeyColumn="AGENCY_ROLES_LEAD_AGENCY_ID"/>
                    <ForeignKeyLink dimension="Partners" foreignKeyColumn="AGENCY_ROLES_PARTNERS_PARTNERS_ID"/>
                    <ForeignKeyLink dimension="Budget Type" foreignKeyColumn="BUDGET_TYPE_ID"/>
                </DimensionLinks>
            </MeasureGroup>
        </MeasureGroups>

    </Cube>
</Schema>


<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE Schema SYSTEM "mondrian.dtd" >
<Schema name="CCRS" metamodelVersion="4.0">
    <Annotations>
        <Annotation name="desc">Cube Schema for CCRS</Annotation>
    </Annotations>

    <PhysicalSchema>
        <!-- schema="REPORTS" ?!-->
        <Table name="WORKPLAN">
            <Key>
                <Column name="ID"/>
            </Key>
        </Table>
    </PhysicalSchema>

    <Cube name="CCRS Analysis" visible="true" cache="true" enabled="true">
        <!-- Define dimensions and attributes -->
        <Dimensions>
            <Dimension name="Workflow" table='WORKPLAN' key="Dimension Id">
                <Attributes>
                    <!-- by default we also have visible="false" when hasHierarchy="false" -->
                    <Attribute name="Dimension Id"
                               levelType="Regular"
                               keyColumn="ID"
                               datatype="Integer"
                               hasHierarchy="false"/>

                    <Attribute name="Workflow"
                               levelType="Regular"
                               keyColumn="WORKFLOW"
                               caption="Workflow caption"
                               hierarchyCaption="Workflow hierarchy caption"
                               datatype="String"
                               hierarchyAllMemberName="All workflows"/>
                </Attributes>


                <!--
                    Hierarchies can be used in time dimension for example where we can have multiple levels but now Mondrian will
                    by default create a hierarchy for every attribute you create unless you specify <Attribute hasHierarchy=”false”>
                -->
                <!--<Hierarchies>-->
                    <!--<Hierarchy name='Media Type' allMemberName='All Media'>-->
                        <!--<Level attribute='Media Type'/>-->
                    <!--</Hierarchy>-->
                    <!--<Hierarchy name='Promotions' allMemberName='All Promotions'>-->
                        <!--<Level attribute='Promotion Name'/>-->
                    <!--</Hierarchy>-->
                <!--</Hierarchies>-->
            </Dimension>

            <Dimension name="Year" table='WORKPLAN' key="Year Id">
                <Attributes>
                    <!-- by default we also have visible="false" when hasHierarchy="false" -->
                    <Attribute name="Year Id"
                               levelType="Regular"
                               keyColumn="ID"
                               datatype="Integer"
                               hasHierarchy="false"/>

                    <Attribute name="Year"
                               levelType="Regular"
                               keyColumn="ENTITY_YEAR"
                               caption="Year caption"
                               hierarchyCaption="Year hierarchy caption"
                               datatype="Numeric"
                               hierarchyAllMemberName="All Years"/>
                </Attributes>
            </Dimension>
        </Dimensions>

        <!-- Define Measures -->
        <MeasureGroups>
            <MeasureGroup name="WORKPLAN Measures" table="WORKPLAN">
                <Measures>
                    <Measure name="Count" column="ID" datatype="Integer" aggregator="count" formatString="#,###"/>
                </Measures>
                <DimensionLinks>
                    <FactLink dimension="Workflow" />
                    <FactLink dimension="Year" />
                    <!--<ForeignKeyLink dimension="Workplan" foreignKeyColumn="ID"/>-->
                </DimensionLinks>
            </MeasureGroup>
        </MeasureGroups>

    </Cube>
</Schema>


<!-- OLD SCHEMA -->
<!--<Schema name="CCRS">-->
    <!--<Annotations>-->
        <!--<Annotation name="desc">Cube Schema for CCRS</Annotation>-->
    <!--</Annotations>-->
    <!--<Cube name="CCRS Analysis">-->
        <!--<Table name="WORKPLAN">-->

        <!--</Table>-->

        <!--&lt;!&ndash;<Dimension name="Name" foreignKey="key_id">&ndash;&gt;-->
            <!--&lt;!&ndash;<Hierarchy name="Name" hasAll="true" allMemberName="All Name" primaryKey="key_id">&ndash;&gt;-->
                <!--&lt;!&ndash;<Table name="NAME"/>&ndash;&gt;-->
                <!--&lt;!&ndash;<Level name="Name" column="NAME" type="String" uniqueMembers="true" levelType="Regular" approxRowCount="1000"/>&ndash;&gt;-->
            <!--&lt;!&ndash;</Hierarchy>&ndash;&gt;-->
        <!--&lt;!&ndash;</Dimension>&ndash;&gt;-->

        <!--<Dimension name="Workplan year" type="TimeDimension">-->
            <!--<Hierarchy hasAll="true" allMemberName="All years">-->
                <!--&lt;!&ndash;No table element here. Fact table is assumed.&ndash;&gt;-->
                <!--<Level name="Year" column="ENTITY_YEAR" type="Numeric" uniqueMembers="false" levelType="TimeYears"/>-->
            <!--</Hierarchy>-->
        <!--</Dimension>-->

        <!--<Dimension name="Workplan workflow">-->
            <!--<Hierarchy hasAll="true" allMemberName="All workflows">-->
                <!--&lt;!&ndash;No table element here. Fact table is assumed.&ndash;&gt;-->
                <!--<Level name="Workflow" column="WORKFLOW" type="String" uniqueMembers="false" levelType="Regular"/>-->
            <!--</Hierarchy>-->
        <!--</Dimension>-->

        <!--<Measure name="Count" column="ID" datatype="Integer" aggregator="count" formatString="#,###"/>-->
    <!--</Cube>-->
<!--</Schema>-->

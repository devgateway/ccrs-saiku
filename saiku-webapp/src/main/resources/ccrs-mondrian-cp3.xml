<Schema name="Common Country Programming" metamodelVersion="4.0"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="mondrian.xsd">
    <Annotations>
        <Annotation name="desc">Cube Schema for CCRS - Common Country Programming</Annotation>
    </Annotations>

    <PhysicalSchema>
        <!-- ## _SHARED_PHYSICAL_SCHEMA_TAG_ ## -->
        
        <Query alias="CP3JointProgrammes">
            <ExpressionView>
                <SQL dialect="generic">
                    <![CDATA[
                        select
                            D.ID,
                            D.TITLE,
                            D.TOTAL_BUDGET,
                            COALESCE(WHICH_MODALITY_ID.LABEL, 'X-CATEGORY') as WHICH_MODALITY_ID,
                            CP3.DESIGNATION, CP3.ENTITY_YEAR,
                            COALESCE(COUNTRY_INCOME_STATUS_ID.LABEL, 'X-CATEGORY') as COUNTRY_INCOME_STATUS_ID,
                            COALESCE(SECONDARY_COUNTRY_INCOME_STATUS_ID.LABEL, 'X-CATEGORY') as SECONDARY_COUNTRY_INCOME_STATUS_ID,
                            COALESCE(cp1.OFFICIAL_REQUEST_DAO_COUNTRY, 'X-BOOLEAN') AS OFFICIAL_REQUEST_DAO_COUNTRY
                        FROM CP3JOINT_PROGRAMMES D
                            JOIN CP3COMMON_COUNTRY_PROGRAMMING CP3 ON CP3.ID = D.PARENT_ID
                            JOIN CP1GENERAL_PROFILE CP1 ON CP3.DESIGNATION = CP1.DESIGNATION AND CP3.ENTITY_YEAR = CP1.ENTITY_YEAR
                            JOIN BASE_COUNTRY bc ON CP3.DESIGNATION = bc.ISO2
                            JOIN V_CP_VALIDATED_DESIGNATIONS v ON CP3.DESIGNATION = v.DESIGNATION AND v.ENTITY_YEAR = CP3.ENTITY_YEAR
                            JOIN CATEGORY COUNTRY_INCOME_STATUS_ID on CP1.COUNTRY_INCOME_STATUS_ID=COUNTRY_INCOME_STATUS_ID.ID
                            LEFT JOIN CATEGORY SECONDARY_COUNTRY_INCOME_STATUS_ID on CP1.SECONDARY_COUNTRY_INCOME_STATUS_ID=SECONDARY_COUNTRY_INCOME_STATUS_ID.ID
                            LEFT JOIN CATEGORY WHICH_MODALITY_ID ON D.WHICH_MODALITY_ID=WHICH_MODALITY_ID.ID
                        WHERE CP3.DESIGNATION != 'AQ'
                          AND CP3.DESIGNATION != 'DOCO'
                          AND CP3.HAS_JOINT_PROGRAMMES=true
                    ]]>
                </SQL>
            </ExpressionView>
        </Query>

        <Query alias="CP3GeneralCube">
            <ExpressionView>
                <SQL dialect="generic">
                    <![CDATA[
                        select
                            cp3.ID, cp3.DESIGNATION, cp3.ENTITY_YEAR,
                            COALESCE(COUNTRY_INCOME_STATUS_ID.LABEL, 'X-CATEGORY') as COUNTRY_INCOME_STATUS_ID,
                            COALESCE(SECONDARY_COUNTRY_INCOME_STATUS_ID.LABEL, 'X-CATEGORY') as SECONDARY_COUNTRY_INCOME_STATUS_ID,
                            COALESCE(UNDAF_PERIOD_ALIGNED_WITH_GOV_ID.LABEL, 'X-CATEGORY') as UNDAF_PERIOD_ALIGNED_WITH_GOV_ID,
                            CASE WHEN cp3.HASUNDAF = TRUE THEN 1 ELSE 0 END as HASUNDAF_COUNT,
                            COALESCE(cp3.HASUNDAF, 'X-BOOLEAN') AS HASUNDAF,
                            date(cp3undaf.DATE_OF_SIGNATURE) as DATE_OF_SIGNATURE,
                            date(cp3undaf.START_DATE) as START_DATE,
                            date(cp3undaf.END_DATE) as END_DATE,
                            cp3undaf.TOTAL_PLANNED_BUDGET,
                            cp3undaf.PREPARATION_PROCESS_MONTHS,
                            CASE WHEN cp3.IS_DEVELOPING_NEWUNDAF = TRUE THEN 1 ELSE 0 END as IS_DEVELOPING_NEWUNDAF_COUNT,
                            COALESCE(cp3.IS_DEVELOPING_NEWUNDAF, 'X-BOOLEAN') AS IS_DEVELOPING_NEWUNDAF,
                            CASE WHEN cp3.HAS_COMMON_COUNTRY_ASSESSMENT = TRUE THEN 1 ELSE 0 END as HAS_COMMON_COUNTRY_ASSESSMENT_COUNT,
                            COALESCE(cp3.HAS_COMMON_COUNTRY_ASSESSMENT, 'X-BOOLEAN') AS HAS_COMMON_COUNTRY_ASSESSMENT,
                            cp3assessment.ASSESSMENT_YEAR,
                            COALESCE(OTHER_ANALYSIS_SOURCE_ID.LABEL, 'X-CATEGORY') as OTHER_ANALYSIS_SOURCE_ID,
                            CASE WHEN cp3.HAS_NATIONAL_DEVELOPMENT_PLAN = TRUE THEN 1 ELSE 0 END as HAS_NATIONAL_DEVELOPMENT_PLAN_COUNT,
                            COALESCE(cp3.HAS_NATIONAL_DEVELOPMENT_PLAN, 'X-BOOLEAN') AS HAS_NATIONAL_DEVELOPMENT_PLAN,
                            CASE WHEN cp3plan.HASUNSUPPORT = TRUE THEN 1 ELSE 0 END as HASUNSUPPORT_COUNT,
                            COALESCE(cp3plan.HASUNSUPPORT, 'X-BOOLEAN') AS HASUNSUPPORT,
                            CASE WHEN cp3.HAS_JOINT_PROGRAMMES = TRUE THEN 1 ELSE 0 END as HAS_JOINT_PROGRAMMES_COUNT,
                            COALESCE(cp3.HAS_JOINT_PROGRAMMES, 'X-BOOLEAN') AS HAS_JOINT_PROGRAMMES,
                            CASE WHEN cp3.HASUNDAFANNUAL_REVIEW = TRUE THEN 1 ELSE 0 END as HASUNDAFANNUAL_REVIEW_COUNT,
                            COALESCE(cp3.HASUNDAFANNUAL_REVIEW, 'X-BOOLEAN') AS HASUNDAFANNUAL_REVIEW,
                            date(cp3undafannual.DATE_COMPLETED) as HASUNDAFANNUAL_DATE_COMPLETED,
                            CASE WHEN cp3.HASUNDAFEVALUATION = TRUE THEN 1 ELSE 0 END as HASUNDAFEVALUATION_COUNT,
                            COALESCE(cp3.HASUNDAFEVALUATION, 'X-BOOLEAN') AS HASUNDAFEVALUATION,
                            CASE WHEN cp3undafevaluation.MANAGEMENT_RESPONSE_PREPARED = TRUE THEN 1 ELSE 0 END as MANAGEMENT_RESPONSE_PREPARED_COUNT,
                            COALESCE(cp3undafevaluation.MANAGEMENT_RESPONSE_PREPARED, 'X-BOOLEAN') AS MANAGEMENT_RESPONSE_PREPARED,
                            date(cp3undafevaluation.DATE_COMPLETED) as HASUNDAFEVALUATION_DATE_COMPLETED,
                            COALESCE(cp1.OFFICIAL_REQUEST_DAO_COUNTRY, 'X-BOOLEAN') AS OFFICIAL_REQUEST_DAO_COUNTRY,
                            CASE WHEN cp3undaf.UNDAF_EXTENSION_PRESENT = TRUE THEN 1 ELSE 0 END as UNDAF_EXTENSION_PRESENT_COUNT,
                            COALESCE(cp3undaf.UNDAF_EXTENSION_PRESENT, 'X-BOOLEAN') AS UNDAF_EXTENSION_PRESENT,
                            CASE WHEN cp3undaf.THEORY_OF_CHANGE_INCLUDED = TRUE THEN 1 ELSE 0 END as THEORY_OF_CHANGE_INCLUDED_COUNT,
                            COALESCE(cp3undaf.THEORY_OF_CHANGE_INCLUDED, 'X-BOOLEAN') AS THEORY_OF_CHANGE_INCLUDED,
                            CASE WHEN cp3undaf.COSTEDMEPLAN_PRESENT = TRUE THEN 1 ELSE 0 END as COSTEDMEPLAN_PRESENT_COUNT,
                            COALESCE(cp3undaf.COSTEDMEPLAN_PRESENT, 'X-BOOLEAN') AS COSTEDMEPLAN_PRESENT,
                            CASE WHEN cp3undaf.UN_VISION2030PRESENT = TRUE THEN 1 ELSE 0 END as UN_VISION2030PRESENT_COUNT,
                            COALESCE(cp3undaf.UN_VISION2030PRESENT, 'X-BOOLEAN') AS UN_VISION2030PRESENT,
                            CASE WHEN cp3undafunvision2030.NRA_CONTRIBUTOR = TRUE THEN 1 ELSE 0 END as NRA_CONTRIBUTOR_COUNT,
                            COALESCE(cp3undafunvision2030.NRA_CONTRIBUTOR, 'X-BOOLEAN') AS NRA_CONTRIBUTOR,
                            cp3undafcostedmeplan.YEAR_COMPLETED,
                            cp3undafunvision2030.YEAR_PREPARED,
                            COALESCE(NRAS_PARTICIPATED_INUNDAFANNUAL_REVIEW_ID.LABEL, 'X-CATEGORY') as NRAS_PARTICIPATED_INUNDAFANNUAL_REVIEW_ID,
                            CASE WHEN cp3newundaf.NEWUNDAFROADMAP_PREPARED = TRUE THEN 1 ELSE 0 END as NEWUNDAFROADMAP_PREPARED_COUNT,
                            COALESCE(cp3newundaf.NEWUNDAFROADMAP_PREPARED, 'X-BOOLEAN') AS NEWUNDAFROADMAP_PREPARED,
                            date(cp3newundaf.NEWUNDAFROADMAP_DATE) as NEWUNDAFROADMAP_DATE,
                            date(cp3plan.NATIONAL_DEVELOPMENT_PLAN_START_DATE) as NATIONAL_DEVELOPMENT_PLAN_START_DATE,
                            date(cp3plan.NATIONAL_DEVELOPMENT_PLAN_END_DATE) as NATIONAL_DEVELOPMENT_PLAN_END_DATE,
                            COALESCE(cp3plan.SDGS_AND_AGENDA2030IN_NATIONAL_DEVELOPMENT_PLAN, 'X-BOOLEAN') AS SDGS_AND_AGENDA2030IN_NATIONAL_DEVELOPMENT_PLAN,
                            COALESCE(NRAS_PARTICIPATED_IN_NATIONAL_DEVELOPMENT_PLAN_ID.LABEL, 'X-CATEGORY') as NRAS_PARTICIPATED_IN_NATIONAL_DEVELOPMENT_PLAN_ID,
                            COALESCE(NRA_PARTICIPATED_ID.LABEL, 'X-CATEGORY') as NRA_PARTICIPATED_ID,
                            COALESCE(NRA_CONTRIBUTE_TO_EVALUATION_MANAGEMENT_RESPONSE_ID.LABEL, 'X-CATEGORY') as NRA_CONTRIBUTE_TO_EVALUATION_MANAGEMENT_RESPONSE_ID,
                            cp3undaf.funding_gap_at_start,
                            CASE WHEN cp3assessment.NON_RESIDENT_AGENCIES_PARTICIPATED = TRUE THEN 1 ELSE 0 END as NON_RESIDENT_AGENCIES_PARTICIPATED_COUNT,
                            COALESCE(cp3assessment.NON_RESIDENT_AGENCIES_PARTICIPATED, 'X-BOOLEAN') AS NON_RESIDENT_AGENCIES_PARTICIPATED_DIM,
                            CASE WHEN cp3undafevaluation.evaluation_include_recommendations = TRUE THEN 1 ELSE 0 END as evaluation_include_recommendations_count,
                            COALESCE(cp3undafevaluation.evaluation_include_recommendations, 'X-BOOLEAN') AS evaluation_include_recommendations_dim,
                            CASE WHEN cp3.has_configuration_review = TRUE THEN 1 ELSE 0 END as has_configuration_review_count,
                            COALESCE(cp3.has_configuration_review, 'X-BOOLEAN') AS has_configuration_review_dim,
                            CASE WHEN cp3.gov_included_in_configuration = TRUE THEN 1 ELSE 0 END as gov_included_in_configuration_count,
                            COALESCE(cp3.gov_included_in_configuration, 'X-BOOLEAN') AS gov_included_in_configuration_dim,
                            CASE WHEN cp3.unct_configuration_changed = TRUE THEN 1 ELSE 0 END as unct_configuration_changed_count,
                            COALESCE(cp3.unct_configuration_changed, 'X-BOOLEAN') AS unct_configuration_changed_dim,
                            CASE WHEN cp3.participates_in_cross_border_initiatives = TRUE THEN 1 ELSE 0 END as participates_in_cross_border_initiatives_count,
                            COALESCE(cp3.participates_in_cross_border_initiatives, 'X-BOOLEAN') AS participates_in_cross_border_initiatives_dim
                        FROM CP3COMMON_COUNTRY_PROGRAMMING cp3
                            JOIN CP1GENERAL_PROFILE cp1 ON cp3.DESIGNATION = cp1.DESIGNATION AND cp3.ENTITY_YEAR = cp1.ENTITY_YEAR
                            JOIN CP3UNDAF cp3undaf ON cp3undaf.PARENT_ID = cp3.id
                            JOIN CP3COMMON_COUNTRY_ASSESSMENT cp3assessment ON cp3assessment.PARENT_ID = cp3.id
                            JOIN CP3NATIONAL_DEVELOPMENT_PLAN cp3plan ON cp3plan.PARENT_ID = cp3.id
                            JOIN CP3UNDAFEVALUATION cp3undafevaluation ON cp3undafevaluation.PARENT_ID = cp3.id
                            JOIN CP3UNDAFANNUAL_REVIEW cp3undafannual ON cp3undafannual.PARENT_ID = cp3.id
                            JOIN CP3UNDAFUNVISION2030 cp3undafunvision2030 ON cp3undafunvision2030.PARENT_ID = cp3undaf.id
                            JOIN CP3NEWUNDAF cp3newundaf ON cp3newundaf.PARENT_ID = cp3.id
                            JOIN CP3UNDAFCOSTEDMEPLAN cp3undafcostedmeplan ON cp3undafcostedmeplan.PARENT_ID = cp3undaf.id
                            JOIN BASE_COUNTRY bc ON cp3.DESIGNATION = bc.ISO2
                            JOIN v_cp_validated_designations v ON cp3.DESIGNATION = v.DESIGNATION AND v.ENTITY_YEAR = cp3.ENTITY_YEAR
                            JOIN CATEGORY COUNTRY_INCOME_STATUS_ID on CP1.COUNTRY_INCOME_STATUS_ID=COUNTRY_INCOME_STATUS_ID.ID
                            LEFT JOIN CATEGORY SECONDARY_COUNTRY_INCOME_STATUS_ID on CP1.SECONDARY_COUNTRY_INCOME_STATUS_ID=SECONDARY_COUNTRY_INCOME_STATUS_ID.ID
                            LEFT JOIN CATEGORY UNDAF_PERIOD_ALIGNED_WITH_GOV_ID ON cp3.UNDAF_PERIOD_ALIGNED_WITH_GOV_ID=UNDAF_PERIOD_ALIGNED_WITH_GOV_ID.ID
                            LEFT JOIN CATEGORY OTHER_ANALYSIS_SOURCE_ID ON cp3assessment.OTHER_ANALYSIS_SOURCE_ID=OTHER_ANALYSIS_SOURCE_ID.ID
                            LEFT JOIN CATEGORY NRAS_PARTICIPATED_INUNDAFANNUAL_REVIEW_ID ON cp3undafannual.NRAS_PARTICIPATED_INUNDAFANNUAL_REVIEW_ID=NRAS_PARTICIPATED_INUNDAFANNUAL_REVIEW_ID.ID
                            LEFT JOIN CATEGORY NRAS_PARTICIPATED_IN_NATIONAL_DEVELOPMENT_PLAN_ID ON cp3plan.NRAS_PARTICIPATED_IN_NATIONAL_DEVELOPMENT_PLAN_ID=NRAS_PARTICIPATED_IN_NATIONAL_DEVELOPMENT_PLAN_ID.ID
                            LEFT JOIN CATEGORY NRA_PARTICIPATED_ID ON cp3undafevaluation.NRA_PARTICIPATED_ID=NRA_PARTICIPATED_ID.ID
                            LEFT JOIN CATEGORY NRA_CONTRIBUTE_TO_EVALUATION_MANAGEMENT_RESPONSE_ID ON cp3undafevaluation.NRA_CONTRIBUTE_TO_EVALUATION_MANAGEMENT_RESPONSE_ID=NRA_CONTRIBUTE_TO_EVALUATION_MANAGEMENT_RESPONSE_ID.ID
                        WHERE cp3.DESIGNATION != 'AQ'
                          AND cp3.DESIGNATION != 'DOCO'
                    ]]>
                </SQL>
            </ExpressionView>
        </Query>
    </PhysicalSchema>

    <!--*************************************************************************
    ***** Shared Dimensions
    *************************************************************************-->
    <!-- ## _SHARED_DIMENSIONS_TAG_ ## -->
    
    <!--*************************************************************************
    ***** CP3 Joint Programmes
    *************************************************************************-->
    <Cube name="Joint Programmes" caption="Joint Programmes" visible="true"
          cache="true" enabled="true" defaultMeasure="Count">
        <Dimensions>
            <Dimension source="Region" />
            <Dimension source="Country" />
            <Dimension source="YesNoTable" table="CP3JointProgrammes" name="OFFICIAL_REQUEST_DAO_COUNTRY" caption="Delivering as One" />
            <Dimension name="Year" caption="Year" table="CP3JointProgrammes" visible="true">
                <Attributes>
                    <Attribute name="Year" keyColumn="ENTITY_YEAR" datatype="Integer" />
                </Attributes>
            </Dimension>
            <Dimension source="CATEGORY" table="CP3JointProgrammes" name="COUNTRY_INCOME_STATUS_ID" caption="Country Income Status" />
            <Dimension source="CATEGORY" table="CP3JointProgrammes" name="SECONDARY_COUNTRY_INCOME_STATUS_ID" caption="Secondary Country Income Status" />

            <Dimension name="Title" caption="Title of Joint Programme" table="CP3JointProgrammes"
                       visible="true">
                <Attributes>
                    <Attribute name="Title" caption="Title" keyColumn="TITLE"
                               levelType="Regular" datatype="String" />
                </Attributes>
            </Dimension>
            
            <Dimension source="CATEGORY" table="CP3JointProgrammes" name="WHICH_MODALITY_ID" caption="Which Funding Modality?" />
        </Dimensions>

        <MeasureGroups>
            <MeasureGroup name="CP Joint Programmes Measures" table="CP3JointProgrammes">
                <Measures>
                    <Measure name="Count" caption="Number of Joint Programmes" column="ID" datatype="Integer"
                             aggregator="distinct-count" visible="true" formatString="#,###"/>
                    <Measure name="Total Budget" caption="Total Budget (Currency USD)" column="TOTAL_BUDGET"
                             datatype="Numeric" aggregator="sum" visible="true" />
                </Measures>
                <DimensionLinks>
                    <!-- ## _SHARED_DIMENSIONS_LINKS_TAG_ ## -->
                    <FactLink dimension="OFFICIAL_REQUEST_DAO_COUNTRY" />
                    <FactLink dimension="COUNTRY_INCOME_STATUS_ID" />
                    <FactLink dimension="SECONDARY_COUNTRY_INCOME_STATUS_ID" />
                    <FactLink dimension="Title"/>
                    <FactLink dimension="WHICH_MODALITY_ID" />
                </DimensionLinks>
            </MeasureGroup>
        </MeasureGroups>
    </Cube>

    <!--*************************************************************************
    ***** CP3 General Cube
    *************************************************************************-->
    <Cube name="Common Country Programing" caption="Common Country Programing" visible="true"
          cache="true" enabled="true" defaultMeasure="Count">
        <Dimensions>
            <Dimension source="Region" />
            <Dimension source="Country" />
            <Dimension source="YesNoTable" table="CP3GeneralCube" name="OFFICIAL_REQUEST_DAO_COUNTRY" caption="Delivering as One" />
            <Dimension name="Year" caption="Year" table="CP3GeneralCube" visible="true">
                <Attributes>
                    <Attribute name="Year" keyColumn="ENTITY_YEAR" datatype="Integer" />
                </Attributes>
            </Dimension>
            <Dimension source="CATEGORY" table="CP3GeneralCube" name="COUNTRY_INCOME_STATUS_ID" caption="Country Income Status" />
            <Dimension source="CATEGORY" table="CP3GeneralCube" name="SECONDARY_COUNTRY_INCOME_STATUS_ID" caption="Secondary Country Income Status" />

            <Dimension source="YesNoTable" table="CP3GeneralCube" name="HASUNDAF" caption="Is there an UN Development Assistance Framework/Cooperation Framework (UNDAF/CF), or equivalent?" />

            <Dimension name="Date of Signature" caption="Date of Signature" table='CP3GeneralCube' key="Dimension Id" type="TIME">
                <Attributes>
                    <Attribute name="Dimension Id" keyColumn="ID"
                               hasHierarchy="false"
                               levelType="Regular" datatype="Integer"/>

                    <Attribute name="Date of Signature" caption="Date of Signature" keyColumn="DATE_OF_SIGNATURE"
                               hierarchyHasAll="true"
                               levelType="TimeUndefined" datatype="Date"/>
                </Attributes>
            </Dimension>

            <Dimension name="Start Date" caption="UNDAF/Cooperation Framework Start Date" table='CP3GeneralCube' key="Dimension Id" type="TIME">
                <Attributes>
                    <Attribute name="Dimension Id" keyColumn="ID"
                               hasHierarchy="false"
                               levelType="Regular" datatype="Integer"/>

                    <Attribute name="Start Date" caption="UNDAF/Cooperation Framework Start Date" keyColumn="START_DATE"
                               hierarchyHasAll="true"
                               levelType="TimeYears" datatype="Date"/>
                </Attributes>
            </Dimension>

            <Dimension name="End Date" caption="UNDAF/Cooperation Framework End Date" table='CP3GeneralCube' key="Dimension Id" type="TIME">
                <Attributes>
                    <Attribute name="Dimension Id" keyColumn="ID"
                               hasHierarchy="false"
                               levelType="Regular" datatype="Integer"/>

                    <Attribute name="End Date" caption="UNDAF/Cooperation Framework End Date" keyColumn="END_DATE"
                               hierarchyHasAll="true"
                               levelType="TimeYears" datatype="Date"/>
                </Attributes>
            </Dimension>

            <Dimension source="YesNoTable" table="CP3GeneralCube" name="IS_DEVELOPING_NEWUNDAF" caption="Is your UNCT in the process of developing a Cooperation Framework?" />
            <Dimension source="YesNoTable" table="CP3GeneralCube" name="HAS_COMMON_COUNTRY_ASSESSMENT" caption="Has a Common Country Analysis (CCA) been conducted for the present UNDAF/Cooperation Framework?" />

            <Dimension name="Year CCA was conducted" caption="Year CCA was conducted" table='CP3GeneralCube' key="Dimension Id">
                <Attributes>
                    <Attribute name="Dimension Id" keyColumn="ID"
                               hasHierarchy="false"
                               levelType="Regular" datatype="Integer"/>

                    <Attribute name="Year CCA was conducted" caption="Year CCA was conducted" keyColumn="ASSESSMENT_YEAR"
                               approxRowCount="2" hierarchyHasAll="true"
                               levelType="Regular" datatype="Boolean"/>
                </Attributes>
            </Dimension>

            <Dimension source="CATEGORY" table="CP3GeneralCube" name="OTHER_ANALYSIS_SOURCE_ID" caption="If the UNCT relied on other analysis, which alternative option did you use?" />
            <Dimension source="YesNoTable" table="CP3GeneralCube" name="HAS_NATIONAL_DEVELOPMENT_PLAN" caption="Is there a National Development Plan?" />
            <Dimension source="YesNoTable" table="CP3GeneralCube" name="HASUNSUPPORT" caption="Did the UN support the development of the National Plan?" />
            <Dimension source="YesNoTable" table="CP3GeneralCube" name="HAS_JOINT_PROGRAMMES" caption="Do you have Joint Programmes?" />
            <Dimension source="YesNoTable" table="CP3GeneralCube" name="HASUNDAFANNUAL_REVIEW" caption="Have you conducted an UNDAF/Cooperation Framework Annual Review in the last 12 months?" />

            <Dimension name="Date Completed (Annual Review)" caption="Date Completed (Annual Review)" table='CP3GeneralCube' key="Dimension Id" type="TIME">
                <Attributes>
                    <Attribute name="Dimension Id" keyColumn="ID"
                               hasHierarchy="false"
                               levelType="Regular" datatype="Integer"/>

                    <Attribute name="Date Completed (Annual Review)" caption="Date Completed (Annual Review)" keyColumn="HASUNDAFANNUAL_DATE_COMPLETED"
                               hierarchyHasAll="true"
                               levelType="TimeUndefined" datatype="Date"/>
                </Attributes>
            </Dimension>

            <Dimension source="YesNoTable" table="CP3GeneralCube" name="HASUNDAFEVALUATION" caption="Have you conducted an UNDAF/Cooperation Framework evaluation for the last UNDAF/Cooperation Framework cycle?" />

            <Dimension name="Date completed (NRAs participate in the UNDAF Evaluation Planning)" caption="Date completed (UN entities without in-country presence participate in the UNDAF Evaluation Planning)" table='CP3GeneralCube' key="Dimension Id" type="TIME">
                <Attributes>
                    <Attribute name="Dimension Id" keyColumn="ID"
                               hasHierarchy="false"
                               levelType="Regular" datatype="Integer"/>

                    <Attribute name="Date completed (NRAs participate in the UNDAF Evaluation Planning)" caption="Date completed (UN entities without in-country presence participate in the UNDAF Evaluation Planning)" keyColumn="HASUNDAFEVALUATION_DATE_COMPLETED"
                               hierarchyHasAll="true"
                               levelType="TimeUndefined" datatype="Date"/>
                </Attributes>
            </Dimension>

            <Dimension source="YesNoTable" table="CP3GeneralCube" name="MANAGEMENT_RESPONSE_PREPARED" caption="Was a management response prepared?" />
            <Dimension source="CATEGORY" table="CP3GeneralCube" name="NRAS_PARTICIPATED_INUNDAFANNUAL_REVIEW_ID" caption="Did UN entities without in-country presence participate in the UNDAF/Cooperation Framework Annual Review?" />
            <Dimension source="YesNoTable" table="CP3GeneralCube" name="UNDAF_EXTENSION_PRESENT" caption="Was there an extension of the UNDAF/Cooperation Framework (approved by the Regional UNDG)?" />
            <Dimension source="YesNoTable" table="CP3GeneralCube" name="THEORY_OF_CHANGE_INCLUDED" caption="Does the UNDAF/Cooperation Framework include a theory of change?" />
            <Dimension source="YesNoTable" table="CP3GeneralCube" name="COSTEDMEPLAN_PRESENT" caption="Do you have a costed monitoring and evaluation plan for the UNDAF/Cooperation Framework?" />
            <Dimension source="YesNoTable" table="CP3GeneralCube" name="UN_VISION2030PRESENT" caption="Is there a UN Vision 2030 paper?" />

            <Dimension name="Year UNDAF completed" caption="Year UNDAF/Cooperation Framework M&amp;E plan was completed" table='CP3GeneralCube' visible="true">
                <Attributes>
                    <Attribute name="Year" keyColumn="YEAR_COMPLETED" datatype="Integer" />
                </Attributes>
            </Dimension>

            <Dimension name="Year UN Vision 2030 was prepared" caption="Year UN Vision 2030 was prepared" table='CP3GeneralCube' visible="true">
                <Attributes>
                    <Attribute name="Year" keyColumn="YEAR_PREPARED" datatype="Integer" />
                </Attributes>
            </Dimension>

            <Dimension source="YesNoTable" table="CP3GeneralCube" name="NRA_CONTRIBUTOR" caption="Did UN entities without in-country presence contribute to the UN Vision 2030 paper?" />
            <Dimension source="YesNoTable" table="CP3GeneralCube" name="NEWUNDAFROADMAP_PREPARED" caption="Has your UNCT prepared a roadmap for its new UNDAF?" />

            <Dimension name="Date UNDAF/Cooperation Framework Roadmap was developed" caption="Date UNDAF/Cooperation Framework Roadmap was developed" table='CP3GeneralCube' key="Dimension Id" type="TIME">
                <Attributes>
                    <Attribute name="Dimension Id" keyColumn="ID"
                               hasHierarchy="false"
                               levelType="Regular" datatype="Integer"/>

                    <Attribute name="Date UNDAF/Cooperation Framework Roadmap was developed" caption="Date UNDAF/Cooperation Framework Roadmap was developed" keyColumn="NEWUNDAFROADMAP_DATE"
                               hierarchyHasAll="true"
                               levelType="TimeUndefined" datatype="Date"/>
                </Attributes>
            </Dimension>

            <Dimension source="CATEGORY" table="CP3GeneralCube" name="UNDAF_PERIOD_ALIGNED_WITH_GOV_ID" caption="Is the period of the UN Development Assistance Framework/Cooperation Framework (or equivalent instrument) aligned with the Government's planning and budgeting cycle?" />

            <Dimension name="National Development Plan Start Date" caption="National Development Plan Start Date" table='CP3GeneralCube' key="Dimension Id" type="TIME">
                <Attributes>
                    <Attribute name="Dimension Id" keyColumn="ID"
                               hasHierarchy="false"
                               levelType="Regular" datatype="Integer"/>

                    <Attribute name="National Development Plan Start Date" caption="National Development Plan Start Date" keyColumn="NATIONAL_DEVELOPMENT_PLAN_START_DATE"
                               hierarchyHasAll="true"
                               levelType="TimeUndefined" datatype="Date"/>
                </Attributes>
            </Dimension>

            <Dimension name="National Development Plan End Date" caption="National Development Plan End Date" table='CP3GeneralCube' key="Dimension Id" type="TIME">
                <Attributes>
                    <Attribute name="Dimension Id" keyColumn="ID"
                               hasHierarchy="false"
                               levelType="Regular" datatype="Integer"/>

                    <Attribute name="National Development Plan End Date" caption="National Development Plan End Date" keyColumn="NATIONAL_DEVELOPMENT_PLAN_END_DATE"
                               hierarchyHasAll="true"
                               levelType="TimeUndefined" datatype="Date"/>
                </Attributes>
            </Dimension>

            <Dimension source="YesNoTable" table="CP3GeneralCube" name="SDGS_AND_AGENDA2030IN_NATIONAL_DEVELOPMENT_PLAN" caption="Are SDGs and Agenda 2030 mainstreamed in the National Development Plan?" />
            <Dimension source="CATEGORY" table="CP3GeneralCube" name="NRAS_PARTICIPATED_IN_NATIONAL_DEVELOPMENT_PLAN_ID" caption="Did UN entities without in-country presence participate in supporting development of the National Development Plan?" />
            <Dimension source="CATEGORY" table="CP3GeneralCube" name="NRA_PARTICIPATED_ID" caption="Did UN entities without in-country physical presence participate in the UNDAF/Cooperation Framework evaluation planning?" />
            <Dimension source="CATEGORY" table="CP3GeneralCube" name="NRA_CONTRIBUTE_TO_EVALUATION_MANAGEMENT_RESPONSE_ID" caption="Did UN entities without in-country physical presence contribute to the evaluation management response?" />
            <Dimension source="YesNoTable" table="CP3GeneralCube" name="NON_RESIDENT_AGENCIES_PARTICIPATED_DIM" caption="Did UN entities without in-country physical presence participate in preparing the CCA?" />
            <Dimension source="YesNoTable" table="CP3GeneralCube" name="evaluation_include_recommendations_dim" caption="Does the evaluation include actionable recommendations, with a clear target audience and time frame for implementation?" />
            <Dimension source="YesNoTable" table="CP3GeneralCube" name="has_configuration_review_dim" caption="Has a country configuration review taken place in the last year?" />
            <Dimension source="YesNoTable" table="CP3GeneralCube" name="gov_included_in_configuration_dim" caption="Was the government involved?" />
            <Dimension source="YesNoTable" table="CP3GeneralCube" name="unct_configuration_changed_dim" caption="Did this lead to a change in the UNCT configuration?" />
            <Dimension source="YesNoTable" table="CP3GeneralCube" name="participates_in_cross_border_initiatives_dim" caption="Does your UNCT participate in cross-border initiatives?" />
        </Dimensions>

        <MeasureGroups>
            <MeasureGroup name="CP3 General Cube Measures" table="CP3GeneralCube">
                <Measures>
                    <Measure name="Count" caption="Number of Country Records Submitted" column="ID" datatype="Integer"
                             aggregator="distinct-count" visible="true" formatString="#,###"/>

                    <Measure name="UNDevelopmentAssistanceFramework" caption="Count UNDAF" column="HASUNDAF_COUNT"
                             datatype="Integer" aggregator="sum" visible="true" formatString="#,###"/>

                    <Measure name="totalPlannedBudget" caption="Total Planned Budget of UNDAF/Cooperation Framework" column="TOTAL_PLANNED_BUDGET"
                             datatype="Numeric" aggregator="sum" visible="true" formatString="#,###"/>

                    <Measure name="preparationProcessMonths" caption="How long (in months) was the UNDAF/Cooperation Framework preparation process" column="PREPARATION_PROCESS_MONTHS"
                             datatype="Integer" aggregator="sum" visible="true" formatString="#,###"/>

                    <Measure name="isDevelopingNewUNDAF" caption="Count of 'Is your UNCT in the process of developing a Cooperation Framework?'" column="IS_DEVELOPING_NEWUNDAF_COUNT"
                             datatype="Integer" aggregator="sum" visible="true" formatString="#,###"/>

                    <Measure name="CommonCountryAssessment" caption="Count UNCT lead their own CCA" column="HAS_COMMON_COUNTRY_ASSESSMENT_COUNT"
                             datatype="Integer" aggregator="sum" visible="true" formatString="#,###"/>

                    <Measure name="NationalDevelopmentPlan" caption="Count is there a National Development Plan" column="HAS_NATIONAL_DEVELOPMENT_PLAN_COUNT"
                             datatype="Integer" aggregator="sum" visible="true" formatString="#,###"/>

                    <Measure name="hasUNSupport" caption="Count of 'Did the UN support the development of the National Plan'" column="HASUNSUPPORT_COUNT"
                             datatype="Integer" aggregator="sum" visible="true" formatString="#,###"/>

                    <Measure name="JointProgrammes" caption="Count of Joint Programmes" column="HAS_JOINT_PROGRAMMES_COUNT"
                             datatype="Integer" aggregator="sum" visible="true" formatString="#,###"/>

                    <Measure name="UNDAFAnnualReview" caption="Count of conducted an UNDAF Annual Review in the last 12 months" column="HASUNDAFANNUAL_REVIEW_COUNT"
                             datatype="Integer" aggregator="sum" visible="true" formatString="#,###"/>

                    <Measure name="UNDAFEvaluation" caption="Count of conducted an UNDAF Evaluation within the past five years" column="HASUNDAFEVALUATION_COUNT"
                             datatype="Integer" aggregator="sum" visible="true" formatString="#,###"/>

                    <Measure name="managementResponsePrepared" caption="Count of 'Was a management response prepared'" column="MANAGEMENT_RESPONSE_PREPARED_COUNT"
                             datatype="Integer" aggregator="sum" visible="true" formatString="#,###"/>

                    <Measure name="undafExtensionPresent" caption="Count of 'Was there an extension of the UNDAF/Cooperation Framework (approved by the Regional UNDG)?'" column="UNDAF_EXTENSION_PRESENT_COUNT"
                             datatype="Integer" aggregator="sum" visible="true" formatString="#,###"/>

                    <Measure name="theoryOfChangeIncluded" caption="Count of 'Does the UNDAF/Cooperation Framework include a theory of change?'" column="THEORY_OF_CHANGE_INCLUDED_COUNT"
                             datatype="Integer" aggregator="sum" visible="true" formatString="#,###"/>

                    <Measure name="costedMePlanPresent" caption="Count of 'Do you have a costed monitoring and evaluation plan for the UNDAF/Cooperation Framework?'" column="COSTEDMEPLAN_PRESENT_COUNT"
                             datatype="Integer" aggregator="sum" visible="true" formatString="#,###"/>

                    <Measure name="unVision2030Present" caption="Count of 'Is there a UN Vision 2030 paper'" column="UN_VISION2030PRESENT_COUNT"
                             datatype="Integer" aggregator="sum" visible="true" formatString="#,###"/>

                    <Measure name="nraContributor" caption="Count of 'Did UN entities without in-country presence contribute to the UN Vision 2030 paper'" column="NRA_CONTRIBUTOR_COUNT"
                             datatype="Integer" aggregator="sum" visible="true" formatString="#,###"/>

                    <Measure name="newUndafRoadmapPrepared" caption="Count of 'Has your UNCT prepared a roadmap for its new UNDAF'" column="NEWUNDAFROADMAP_PREPARED_COUNT"
                             datatype="Integer" aggregator="sum" visible="true" formatString="#,###"/>

                    <Measure name="fundingGapAtStart" caption="Total funding gap at the start of the implementation" column="funding_gap_at_start"
                             datatype="Numeric" aggregator="sum" visible="true" formatString="#,###"/>

                    <Measure name="nonResidentAgenciesParticipated" caption="Count of 'Did UN entities without in-country physical presence participate in preparing the CCA?'" column="NON_RESIDENT_AGENCIES_PARTICIPATED_COUNT"
                             datatype="Integer" aggregator="sum" visible="true" formatString="#,###"/>

                    <Measure name="evaluationIncludeRecommendations" caption="Count of 'Does the evaluation include actionable recommendations, with a clear target audience and time frame for implementation?'" column="evaluation_include_recommendations_count"
                             datatype="Integer" aggregator="sum" visible="true" formatString="#,###"/>

                    <Measure name="hasConfigurationReview" caption="Count of 'Has a country configuration review taken place in the last year?'" column="has_configuration_review_count"
                             datatype="Integer" aggregator="sum" visible="true" formatString="#,###"/>

                    <Measure name="govIncludedInConfiguration" caption="Count of 'Was the government involved?'" column="gov_included_in_configuration_count"
                             datatype="Integer" aggregator="sum" visible="true" formatString="#,###"/>

                    <Measure name="unctConfigurationChanged" caption="Count of 'Did this lead to a change in the UNCT configuration?'" column="unct_configuration_changed_count"
                             datatype="Integer" aggregator="sum" visible="true" formatString="#,###"/>

                    <Measure name="participatesInCrossBorderInitiatives" caption="Count of 'Does your UNCT participate in cross-border initiatives?'" column="participates_in_cross_border_initiatives_count"
                             datatype="Integer" aggregator="sum" visible="true" formatString="#,###"/>
                </Measures>
                <DimensionLinks>
                    <!-- ## _SHARED_DIMENSIONS_LINKS_TAG_ ## -->
                    <FactLink dimension="OFFICIAL_REQUEST_DAO_COUNTRY" />
                    <FactLink dimension="COUNTRY_INCOME_STATUS_ID" />
                    <FactLink dimension="SECONDARY_COUNTRY_INCOME_STATUS_ID" />
                    <FactLink dimension="HASUNDAF" />
                    <FactLink dimension="HAS_COMMON_COUNTRY_ASSESSMENT" />
                    <FactLink dimension="HAS_NATIONAL_DEVELOPMENT_PLAN" />
                    <FactLink dimension="HAS_JOINT_PROGRAMMES" />
                    <FactLink dimension="HASUNDAFANNUAL_REVIEW" />
                    <FactLink dimension="HASUNDAFEVALUATION" />
                    <FactLink dimension="IS_DEVELOPING_NEWUNDAF" />
                    <FactLink dimension="Year CCA was conducted" />
                    <FactLink dimension="HASUNSUPPORT" />
                    <FactLink dimension="MANAGEMENT_RESPONSE_PREPARED" />
                    <FactLink dimension="Date of Signature" />
                    <FactLink dimension="Start Date" />
                    <FactLink dimension="End Date" />
                    <FactLink dimension="Date Completed (Annual Review)" />
                    <FactLink dimension="Date completed (NRAs participate in the UNDAF Evaluation Planning)" />
                    <FactLink dimension="OTHER_ANALYSIS_SOURCE_ID" />
                    <FactLink dimension="NRAS_PARTICIPATED_INUNDAFANNUAL_REVIEW_ID" />
                    <FactLink dimension="UNDAF_EXTENSION_PRESENT" />
                    <FactLink dimension="THEORY_OF_CHANGE_INCLUDED" />
                    <FactLink dimension="COSTEDMEPLAN_PRESENT" />
                    <FactLink dimension="UN_VISION2030PRESENT" />
                    <FactLink dimension="Year UNDAF completed" />
                    <FactLink dimension="Year UN Vision 2030 was prepared" />
                    <FactLink dimension="NRA_CONTRIBUTOR" />
                    <FactLink dimension="NEWUNDAFROADMAP_PREPARED" />
                    <FactLink dimension="Date UNDAF/Cooperation Framework Roadmap was developed" />
                    <FactLink dimension="UNDAF_PERIOD_ALIGNED_WITH_GOV_ID" />
                    <FactLink dimension="National Development Plan Start Date" />
                    <FactLink dimension="National Development Plan End Date" />
                    <FactLink dimension="SDGS_AND_AGENDA2030IN_NATIONAL_DEVELOPMENT_PLAN" />
                    <FactLink dimension="NRAS_PARTICIPATED_IN_NATIONAL_DEVELOPMENT_PLAN_ID" />
                    <FactLink dimension="NRA_PARTICIPATED_ID" />
                    <FactLink dimension="NRA_CONTRIBUTE_TO_EVALUATION_MANAGEMENT_RESPONSE_ID" />
                    <FactLink dimension="NON_RESIDENT_AGENCIES_PARTICIPATED_DIM" />
                    <FactLink dimension="evaluation_include_recommendations_dim" />
                    <FactLink dimension="has_configuration_review_dim" />
                    <FactLink dimension="gov_included_in_configuration_dim" />
                    <FactLink dimension="unct_configuration_changed_dim" />
                    <FactLink dimension="participates_in_cross_border_initiatives_dim" />
                </DimensionLinks>
            </MeasureGroup>
        </MeasureGroups>
    </Cube>
</Schema>

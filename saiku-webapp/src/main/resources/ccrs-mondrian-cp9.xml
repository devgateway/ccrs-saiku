<Schema name="Crisis Prevention Profile" metamodelVersion="4.0"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="mondrian.xsd">
    <Annotations>
        <Annotation name="desc">Cube Schema for CCRS - Crisis Prevention Profile</Annotation>
    </Annotations>

    <PhysicalSchema>
        <!-- ## _SHARED_PHYSICAL_SCHEMA_TAG_ ## -->
        
        <!-- ## _CATEGORY_QUERIES_TAG_ ## -->
        
        <!-- ## _YESNOTABLE_QUERIES_TAG_ ## -->

        <Query alias="CP9CountryMechanisms">
            <ExpressionView>
                <SQL dialect="generic">
                    <![CDATA[
                        select
                            M.ID, M.LIST_MECHANISMS, M.PARTNERS_FOR_MECHANISMS, CP1.DESIGNATION, CP1.ENTITY_YEAR, CP1.COUNTRY_INCOME_STATUS_ID, CP1.SECONDARY_COUNTRY_INCOME_STATUS_ID,
                            CASE WHEN cp1.OFFICIAL_REQUEST_DAO_COUNTRY = TRUE THEN 1 ELSE 0 END as OFFICIAL_REQUEST_DAO_COUNTRY
                        from CP9COUNTRY_MECHANISMS_COORDINATE_INTL_SUPPORT M, CP9UNSTRATEGY_HUMANITARIAM_TO_LONG_TERM cp9unstrategy, CP9POST_CRISIS_PROFILE cp9, CP1GENERAL_PROFILE CP1, BASE_COUNTRY bc, v_cp_validated_designations v
                        WHERE
                            M.PARENT_ID = cp9unstrategy.ID AND
							cp9unstrategy.PARENT_ID = cp9.ID AND
							cp9.DESIGNATION = cp1.DESIGNATION AND cp9.ENTITY_YEAR = cp1.ENTITY_YEAR AND
                            CP1.DESIGNATION != 'AQ' AND CP1.DESIGNATION != 'DOCO' AND CP1.DESIGNATION = bc.iso2 and
                            CP1.designation = v.designation and v.entity_year = CP1.ENTITY_YEAR
                    ]]>
                </SQL>
            </ExpressionView>
        </Query>

        <Query alias="CP9KeyPartners">
            <ExpressionView>
                <SQL dialect="generic">
                    <![CDATA[
                        select
                            M.ID, M.KEY_PARTNER, M.DESCRIBE_AGREEMENTS, CP1.DESIGNATION, CP1.ENTITY_YEAR, CP1.COUNTRY_INCOME_STATUS_ID, CP1.SECONDARY_COUNTRY_INCOME_STATUS_ID,
                            CASE WHEN cp1.OFFICIAL_REQUEST_DAO_COUNTRY = TRUE THEN 1 ELSE 0 END as OFFICIAL_REQUEST_DAO_COUNTRY
                        from CP9KEY_PARTNERS M, CP9AGREEMENTS_WITH_KEY_PARTNERS cp9agreements, CP9POST_CRISIS_PROFILE cp9, CP1GENERAL_PROFILE CP1, BASE_COUNTRY bc, v_cp_validated_designations v
                        WHERE
                            M.PARENT_ID = cp9agreements.ID AND
                            cp9agreements.PARENT_ID = cp9.ID AND
							cp9.DESIGNATION = cp1.DESIGNATION AND cp9.ENTITY_YEAR = cp1.ENTITY_YEAR AND
                            CP1.DESIGNATION != 'AQ' AND CP1.DESIGNATION != 'DOCO' AND CP1.DESIGNATION = bc.iso2 and
                            CP1.designation = v.designation and v.entity_year = CP1.ENTITY_YEAR
                    ]]>
                </SQL>
            </ExpressionView>
        </Query>

        <Query alias="CP9GeneralCube">
            <ExpressionView>
                <SQL dialect="generic">
                    <![CDATA[
                        select
                        cp9.ID, cp9.DESIGNATION, cp9.ENTITY_YEAR, CP1.COUNTRY_INCOME_STATUS_ID, CP1.SECONDARY_COUNTRY_INCOME_STATUS_ID,
                        CASE WHEN cp9.HASUNPEACE_KEEPING_MISSION = TRUE THEN 1 ELSE 0 END as HASUNPEACE_KEEPING_MISSION,                        
                        CASE WHEN cp9.GOVERNMENT_MECHANISM_COORDINATEDRREFFORTS = TRUE THEN 1 ELSE 0 END as GOVERNMENT_MECHANISM_COORDINATEDRREFFORTS,
                        CASE WHEN cp9.DOESUNCTPARTICIPATE = TRUE AND cp9.GOVERNMENT_MECHANISM_COORDINATEDRREFFORTS = TRUE THEN 1 ELSE 0 END as DOESUNCTPARTICIPATE,
                        CASE WHEN cp9.DOESUNCTSUPPORTDRREFFORTS = TRUE THEN 1 ELSE 0 END as DOESUNCTSUPPORTDRREFFORTS,
                        CASE WHEN cp9unpeace.HAS_INTEGRATED_STRATEGIC_FRAMEWORK = TRUE THEN 1 ELSE 0 END as HAS_INTEGRATED_STRATEGIC_FRAMEWORK,
                        CASE WHEN cp9unpeace.HAS_INTEGRATED_STRATEGIC_FRAMEWORK = TRUE THEN date(cp9integrated.START_DATE) ELSE null END as START_DATE,
                        CASE WHEN cp9unpeace.HAS_INTEGRATED_STRATEGIC_FRAMEWORK = TRUE THEN date(cp9integrated.END_DATE) ELSE null END as END_DATE,
                        CASE WHEN cp9unpeace.HAS_INTEGRATED_STRATEGIC_FRAMEWORK = TRUE THEN CASE WHEN cp9integrated.HAS_JOINT_STRUCTURESUNCTUN = TRUE THEN 1 ELSE 0 END ELSE null END as HAS_JOINT_STRUCTURESUNCTUN,
                        CASE WHEN cp9unpeace.HAS_INTEGRATED_STRATEGIC_FRAMEWORK = TRUE THEN CASE WHEN cp9integrated.DEVELOPMENT_SUPPORTED_BY_PLANNING_UNIT = TRUE THEN 1 ELSE 0 END ELSE null END as DEVELOPMENT_SUPPORTED_BY_PLANNING_UNIT,
                        CASE WHEN cp9unpeace.HAS_INTEGRATED_STRATEGIC_FRAMEWORK = TRUE THEN CASE WHEN cp9integrated.HAS_MECHANISMS_FOR_MONITORING = TRUE THEN 1 ELSE 0 END ELSE null END as HAS_MECHANISMS_FOR_MONITORING,
                        CASE WHEN cp9unpeace.HAS_INTEGRATED_STRATEGIC_FRAMEWORK = TRUE THEN cp9integrated.IS_NEW_MONITORED_AND_REPORTED_ID ELSE null END as IS_NEW_MONITORED_AND_REPORTED_ID,
                        CASE WHEN cp9unpeace.HAS_INTEGRATED_STRATEGIC_FRAMEWORK = TRUE THEN CASE WHEN cp9integrated.HAS_FRAMEWORK_LINK = TRUE THEN 1 ELSE 0 END ELSE null END as HAS_FRAMEWORK_LINK,
                        CASE WHEN cp9unpeace.HASUNUNCTCOLABORATION = TRUE THEN 1 ELSE 0 END as HASUNUNCTCOLABORATION,
                        CASE WHEN cp9unpeace.HASUNUNCTCOLABORATION = TRUE THEN CASE WHEN cp9ununctcolaboration.TYPE_JOINT_COLLABORATION_ID = 15988 THEN 1 ELSE 0 END ELSE null END as IS_JOINT_PROGRAMME,
                        cp9ununctcolaboration.TYPE_JOINT_COLLABORATION_ID,
                        CASE WHEN cp9unpeace.HAS_COMMON_SERVICES_TOUNCTMEMBERS = TRUE THEN 1 ELSE 0 END as HAS_COMMON_SERVICES_TOUNCTMEMBERS,
                        CASE WHEN cp9unpeace.IS_MEMBER_OF_JOINTUNCTCOMMUNICATIONS_GROUP = TRUE THEN 1 ELSE 0 END as IS_MEMBER_OF_JOINTUNCTCOMMUNICATIONS_GROUP,
                        CASE WHEN cp9unpeace.IS_DRAWDOWN_WITHDRAWALUNMISSION = TRUE THEN 1 ELSE 0 END as IS_DRAWDOWN_WITHDRAWALUNMISSION,
                        cp9.HAS_NEW_CONFLICT_ANALYSIS_ID,
                        cp9.DEVELOPMENT_PLANNING_ALIGNED_ID,
                        CASE WHEN cp9conflict.HAS_ANALYSIS_BEEN_TAKEN_WITHUN = TRUE THEN 1 ELSE 0 END as HAS_ANALYSIS_BEEN_TAKEN_WITHUN,
                        CASE cp9unstrategy.HAS_COUNTRY_MECHANISMS_COORDINATE_INTL_SUPPORT WHEN TRUE THEN 1 WHEN FALSE THEN 0 ELSE null END as HAS_COUNTRY_MECHANISMS_COORDINATE_INTL_SUPPORT,
                        CASE WHEN cp9.HAS_OPERATIONAL_DISASTER_RISK_REDUCTION_STRATEGY = TRUE THEN 1 ELSE 0 END as HAS_OPERATIONAL_DISASTER_RISK_REDUCTION_STRATEGY,
                        CASE WHEN cp9.HAS_AGREEMENTS_WITH_KEY_PARTNERS = TRUE THEN 1 ELSE 0 END as HAS_AGREEMENTS_WITH_KEY_PARTNERS,
                        CASE WHEN cp9.HAS_AGREEMENTS_WITH_KEY_PARTNERS = TRUE THEN CASE WHEN cp9agreements.HAS_ACTIVE_COORDINATION_MECHANISMS = TRUE THEN 1 ELSE 0 END ELSE null END as HAS_ACTIVE_COORDINATION_MECHANISMS,
                        CASE WHEN cp9.HAS_INTERACTIONWBDIRECTORUNLEADER = TRUE THEN 1 ELSE 0 END as HAS_INTERACTIONWBDIRECTORUNLEADER,
                        CASE WHEN cp9.HAS_INTERACTIONWBDIRECTORUNLEADER = TRUE THEN CASE WHEN cp9interactionwbdirectorunleader.WBUNCOLLABORATE_ON_UPSTREAM_POLICY = TRUE THEN 1 ELSE 0 END ELSE null END as WBUNCOLLABORATE_ON_UPSTREAM_POLICY,
                        CASE WHEN cp9.HAS_JOINT_RISK_ASESSMENTS = TRUE THEN 1 ELSE 0 END as HAS_JOINT_RISK_ASESSMENTS,
                        CASE WHEN cp9.HAS_JOINT_INITIATIVES_TO_MANAGE_RISKS = TRUE THEN 1 ELSE 0 END as HAS_JOINT_INITIATIVES_TO_MANAGE_RISKS,
                        CASE WHEN cp1.OFFICIAL_REQUEST_DAO_COUNTRY = TRUE THEN 1 ELSE 0 END as OFFICIAL_REQUEST_DAO_COUNTRY,
                        CASE WHEN cp9.HAS_SUSTAINING_PEACE_ELEMENTS = TRUE THEN 1 ELSE 0 END as HAS_SUSTAINING_PEACE_ELEMENTS,
                        CASE WHEN cp9.HAS_OTHER_STRATEGIES = TRUE THEN 1 ELSE 0 END as HAS_OTHER_STRATEGIES,
                        CASE WHEN cp9.HAS_NATIONAL_MECHANISMS = TRUE THEN 1 ELSE 0 END as HAS_NATIONAL_MECHANISMS,
                        CASE WHEN cp9.HAS_HUMANITARIAN_CRISIS = TRUE THEN 1 ELSE 0 END as HAS_HUMANITARIAN_CRISIS,
                        CASE WHEN cp9.HAS_HUMANITARIAN_CRISIS = TRUE THEN CASE WHEN cp9humanitarianstructures.UN_COORDINATOR = TRUE THEN 1 ELSE 0 END ELSE null END as UN_COORDINATOR,
                        CASE WHEN cp9.HAS_HUMANITARIAN_CRISIS = TRUE THEN CASE WHEN cp9humanitarianstructures.COUNTRY_TEAM = TRUE THEN 1 ELSE 0 END ELSE null END as COUNTRY_TEAM,
                        CASE WHEN cp9.HAS_HUMANITARIAN_CRISIS = TRUE THEN CASE WHEN cp9humanitarianstructures.RESPONSE_PLAN = TRUE THEN 1 ELSE 0 END ELSE null END as RESPONSE_PLAN,
                        CASE WHEN cp9.HAS_HUMANITARIAN_CRISIS = TRUE THEN cp9humanitarianstructures.OTHER ELSE null END as HS_OTHER,
                        CASE WHEN cp9.HAS_HUMANITARIAN_CRISIS = TRUE THEN CASE WHEN cp9humanitarianjointwork.NEEDS_ANALYSIS = TRUE THEN 1 ELSE 0 END ELSE null END as NEEDS_ANALYSIS,
                        CASE WHEN cp9.HAS_HUMANITARIAN_CRISIS = TRUE THEN CASE WHEN cp9humanitarianjointwork.CONFLICT_ANALYSIS = TRUE THEN 1 ELSE 0 END ELSE null END as CONFLICT_ANALYSIS,
                        CASE WHEN cp9.HAS_HUMANITARIAN_CRISIS = TRUE THEN CASE WHEN cp9humanitarianjointwork.PLANNING_FOR_COLLECTIVE_OUTCOMES = TRUE THEN 1 ELSE 0 END ELSE null END as PLANNING_FOR_COLLECTIVE_OUTCOMES,
                        CASE WHEN cp9.HAS_HUMANITARIAN_CRISIS = TRUE THEN CASE WHEN cp9humanitarianjointwork.PROGRAMMING = TRUE THEN 1 ELSE 0 END ELSE null END as PROGRAMMING,
                        CASE WHEN cp9.HAS_HUMANITARIAN_CRISIS = TRUE THEN CASE WHEN cp9humanitarianjointwork.MONITORING_AND_EVALUATION = TRUE THEN 1 ELSE 0 END ELSE null END as MONITORING_AND_EVALUATION,
                        CASE WHEN cp9.HAS_HUMANITARIAN_CRISIS = TRUE THEN CASE WHEN cp9humanitarianjointwork.COORDINATION_MECHANISMS = TRUE THEN 1 ELSE 0 END ELSE null END as COORDINATION_MECHANISMS
                    from
                        -- DERBY-PROPERTIES joinOrder = FIXED
                        CP9POST_CRISIS_PROFILE cp9, CP1GENERAL_PROFILE cp1, CP9UNPEACE_KEEPING_MISSION cp9unpeace,
                        CP9INTEGRATED_STRATEGIC_FRAMEWORK cp9integrated, CP9UNUNCTCOLABORATION cp9ununctcolaboration,
                        CP9CONFLICT_ANALYSIS cp9conflict, CP9UNSTRATEGY_HUMANITARIAM_TO_LONG_TERM cp9unstrategy, CP9AGREEMENTS_WITH_KEY_PARTNERS cp9agreements,
                        CP9INTERACTIONWBDIRECTORUNLEADER cp9interactionwbdirectorunleader, CP9HUMANITARIAN_STRUCTURES cp9humanitarianstructures,
                        CP9HUMANITARIAN_JOINT_WORK cp9humanitarianjointwork
                    WHERE
                        cp9.DESIGNATION = cp1.DESIGNATION AND cp9.ENTITY_YEAR = cp1.ENTITY_YEAR AND
                        cp9unpeace.PARENT_ID = cp9.ID AND
                        cp9integrated.PARENT_ID = cp9unpeace.ID AND
                        cp9ununctcolaboration.PARENT_ID = cp9unpeace.ID AND
                        cp9conflict.PARENT_ID = cp9.ID AND
                        cp9unstrategy.PARENT_ID = cp9.ID AND
                        cp9agreements.PARENT_ID = cp9.ID AND
                        cp9humanitarianstructures.PARENT_ID = cp9.ID AND
                        cp9humanitarianjointwork.PARENT_ID = cp9.ID AND
                        cp9interactionwbdirectorunleader.PARENT_ID = cp9.ID AND
                        cp9.DESIGNATION != 'AQ' AND cp9.DESIGNATION != 'DOCO' AND cp9.DESIGNATION in (select iso2 from BASE_COUNTRY) and
                        cp9.designation in (select v.designation from v_cp_validated_designations v where v.entity_year = cp9.ENTITY_YEAR)
                    ]]>
                </SQL>
            </ExpressionView>
        </Query>
    </PhysicalSchema>
    
    <!--*************************************************************************
    ***** Shared Dimensions
    *************************************************************************-->
    <!-- ## _SHARED_DIMENSIONS_TAG_ ## -->

    <!--*************************************************************************
    ***** CP9 Country Mechanisms
    *************************************************************************-->
    <Cube name="CountryMechanisms" caption="Country Mechanisms" visible="true"
          cache="true" enabled="true" defaultMeasure="Count">
        <Dimensions>
            <Dimension source="Region" />
            <Dimension source="Country" />
            <Dimension source="Delivering as One" />
            <Dimension name="Year" caption="Year" table="CP9CountryMechanisms" visible="true">
                <Attributes>
                    <Attribute name="Year" keyColumn="ENTITY_YEAR" datatype="Integer" />
                </Attributes>
            </Dimension>
            <Dimension source="CountryIncomeStatus" />
            <Dimension source="SecondaryCountryIncomeStatus" />

            <Dimension name="Mechanism" caption="Mechanism" table="CP9CountryMechanisms"
                       key="Dimension Id" visible="true">
                <Attributes>
                    <Attribute name="Dimension Id" keyColumn="ID"
                               hasHierarchy="false" levelType="Regular" datatype="Integer" />

                    <Attribute name="Mechanism" caption="Mechanism" keyColumn="LIST_MECHANISMS"
                               hierarchyAllMemberName="All Mechanisms" hierarchyCaption="All Mechanisms"
                               levelType="Regular" datatype="String" />
                </Attributes>
            </Dimension>

            <Dimension name="Partners that support this mechanism" caption="Partners that support this mechanism" table="CP9CountryMechanisms"
                       key="Dimension Id" visible="true">
                <Attributes>
                    <Attribute name="Dimension Id" keyColumn="ID"
                               hasHierarchy="false" levelType="Regular" datatype="Integer" />

                    <Attribute name="Partners that support this mechanism" caption="Partners that support this mechanism" keyColumn="PARTNERS_FOR_MECHANISMS"
                               hierarchyAllMemberName="All Partners" hierarchyCaption="All Partners"
                               levelType="Regular" datatype="String" />
                </Attributes>
            </Dimension>
        </Dimensions>

        <MeasureGroups>
            <MeasureGroup name="CP9 Country Mechanisms Measures" table="CP9CountryMechanisms">
                <Measures>
                    <Measure name="Count" caption="Number of Country Mechanisms" column="ID" datatype="Integer"
                             aggregator="distinct-count" visible="true" formatString="#,###"/>
                </Measures>
                <DimensionLinks>
                    <!-- ## _SHARED_DIMENSIONS_LINKS_TAG_ ## -->
                    <FactLink dimension="Mechanism" />
                    <FactLink dimension="Partners that support this mechanism" />
                </DimensionLinks>
            </MeasureGroup>
        </MeasureGroups>
    </Cube>

    <!--*************************************************************************
    ***** CP9 Key Partners
    *************************************************************************-->
    <Cube name="KeyPartners" caption="Key Partners" visible="true"
          cache="true" enabled="true" defaultMeasure="Count">
        <Dimensions>
            <Dimension source="Region" />
            <Dimension source="Country" />
            <Dimension source="Delivering as One" />
            <Dimension name="Year" caption="Year" table="CP9KeyPartners" visible="true">
                <Attributes>
                    <Attribute name="Year" keyColumn="ENTITY_YEAR" datatype="Integer" />
                </Attributes>
            </Dimension>
            <Dimension source="CountryIncomeStatus" />
            <Dimension source="SecondaryCountryIncomeStatus" />

            <Dimension name="Describe the agreements/arrangements/initiatives for crisis" caption="Describe the agreements/arrangements/initiatives for crisis" table="CP9KeyPartners"
                       key="Dimension Id" visible="true">
                <Attributes>
                    <Attribute name="Dimension Id" keyColumn="ID"
                               hasHierarchy="false" levelType="Regular" datatype="Integer" />

                    <Attribute name="Describe the agreements/arrangements/initiatives for crisis" caption="Describe the agreements/arrangements/initiatives for crisis" keyColumn="DESCRIBE_AGREEMENTS"
                               hierarchyAllMemberName="All Agreements" hierarchyCaption="All Agreements"
                               levelType="Regular" datatype="String" />
                </Attributes>
            </Dimension>

            <Dimension name="Key Partner" caption="Key Partner" table="CP9KeyPartners"
                       key="Dimension Id" visible="true">
                <Attributes>
                    <Attribute name="Dimension Id" keyColumn="ID"
                               hasHierarchy="false" levelType="Regular" datatype="Integer" />

                    <Attribute name="Key Partner" caption="Key Partner" keyColumn="KEY_PARTNER"
                               hierarchyAllMemberName="All Partners" hierarchyCaption="All Partners"
                               levelType="Regular" datatype="String" />
                </Attributes>
            </Dimension>
        </Dimensions>

        <MeasureGroups>
            <MeasureGroup name="CP9 Key Partners Measures" table="CP9KeyPartners">
                <Measures>
                    <Measure name="Count" caption="Number of Key Partners" column="ID" datatype="Integer"
                             aggregator="distinct-count" visible="true" formatString="#,###"/>
                </Measures>
                <DimensionLinks>
                    <!-- ## _SHARED_DIMENSIONS_LINKS_TAG_ ## -->
                    <FactLink dimension="Key Partner" />
                    <FactLink dimension="Describe the agreements/arrangements/initiatives for crisis" />
                </DimensionLinks>
            </MeasureGroup>
        </MeasureGroups>
    </Cube>

    <!--*************************************************************************
    ***** CP9 General Cube
    *************************************************************************-->
    <Cube name="Crisis Prevention Profile" caption="Crisis Prevention Profile" visible="true"
          cache="true" enabled="true" defaultMeasure="Count">
        <Dimensions>
            <Dimension source="Region" />
            <Dimension source="Country" />
            <Dimension source="Delivering as One" />
            <Dimension name="Year" caption="Year" table="CP9GeneralCube" visible="true">
                <Attributes>
                    <Attribute name="Year" keyColumn="ENTITY_YEAR" datatype="Integer" />
                </Attributes>
            </Dimension>
            <Dimension source="CountryIncomeStatus" />
            <Dimension source="SecondaryCountryIncomeStatus" />

            <Dimension table="YesNoTable" name="UN peacekeeping" caption="Is there a UN peacekeeping or special political mission?" />
            <Dimension table="YesNoTable" name="Is there an Integrated Strategic Framework (ISF)" caption="Is there an Integrated Strategic Framework (ISF)?" />
            
            <Dimension name="Start Date" caption="Start Date of ISF" table='CP9GeneralCube' key="Dimension Id" type="TIME">
                <Attributes>
                    <Attribute name="Dimension Id" keyColumn="ID"
                               hasHierarchy="false"
                               levelType="Regular" datatype="Integer"/>

                    <Attribute name="Start Date" caption="Start Date of ISF" keyColumn="START_DATE"
                               hierarchyHasAll="true"
                               levelType="TimeYears" datatype="Date"/>
                </Attributes>
            </Dimension>

            <Dimension name="End Date" caption="End Date of ISF" table='CP9GeneralCube' key="Dimension Id" type="TIME">
                <Attributes>
                    <Attribute name="Dimension Id" keyColumn="ID"
                               hasHierarchy="false"
                               levelType="Regular" datatype="Integer"/>

                    <Attribute name="End Date" caption="End Date of ISF" keyColumn="END_DATE"
                               hierarchyHasAll="true"
                               levelType="TimeYears" datatype="Date"/>
                </Attributes>
            </Dimension>

            <Dimension table="YesNoTable" name="Are there joint structures in place between the UNCT and the UN Mission" caption="Are there joint structures in place between the UNCT and the UN Mission?" />
            <Dimension table="YesNoTable" name="Was the development and implementation of the ISF supported by a joint analytical planning unit including mission and country team" caption="Was the development and implementation of the ISF supported by a joint analytical planning unit including mission and country team?" />
            <Dimension table="YesNoTable" name="Are there agreed upon mechanisms for the monitoring and evaluation of the ISF" caption="Are there agreed upon mechanisms for the monitoring and evaluation of the ISF?" />
            <Dimension source="CATEGORY" table="DaoSOPsImplementingLevel" name="Is the ISF regularly monitored and reported on" caption="Is the ISF regularly monitored and reported on?" />
            <Dimension table="YesNoTable" name="Is there programmatic collaboration between the UN Mission and UNCT (including Joint Programmes/Programming)" caption="Is there programmatic collaboration between the UN Mission and UNCT (including Joint Programmes/Programming)?" />
            <Dimension source="CATEGORY" table="TypeJointCollaboration" name="What type of programmatic collaboration" caption="What type of programmatic collaboration?" />
            <Dimension table="YesNoTable" name="Does the UN Mission provide common services to UNCT members or vice versa" caption="Does the UN Mission provide common services to UNCT members or vice versa?" />
            <Dimension table="YesNoTable" name="Is the mission a member of the Joint UNCT Communications Group" caption="Is the mission a member of the Joint UNCT Communications Group?" />
            <Dimension table="YesNoTable" name="If there is a draw down and/or withdrawal of the UN Mission, has transition planning taken place jointly with the mission" caption="If there is a draw down and/or withdrawal of the UN Mission, has transition planning taken place jointly with the mission?" />
            <Dimension source="CATEGORY" table="DaoSOPsImplementingLevel" name="HasNewConflictAnalysis" caption="Has New Conflict Analysis?" />
            <Dimension table="YesNoTable" name="Has the conflict analysis been undertaken together with the UN Mission" caption="Has the conflict analysis been undertaken together with the UN Mission?" />
            <Dimension source="CATEGORY" table="DaoSOPsImplementingLevel" name="DevelopmentPlanningAligned" caption="Is the development planning framework (UNDAF or equivalent) aligned with the content of the humanitarian response plan (or vice versa)?" />
            <Dimension table="YesNoTable" name="Are there mechanisms in place to coordinate UN efforts across the humanitarian, development and peace-building nexus" caption="Are there mechanisms in place to coordinate UN efforts across the humanitarian, development and peace-building nexus?" />
            <Dimension table="YesNoTable" name="Disaster Risk Reduction" caption="Is there a current, operational Disaster Risk Reduction strategy?" />
            <Dimension table="YesNoTable" name="GOVERNMENT_MECHANISM_COORDINATEDRREFFORTS" caption="Does the government have a formal mechanism to coordinate DRR efforts with development partners, including the United Nations?" />
            <Dimension table="YesNoTable" name="DOESUNCTPARTICIPATE" caption="If yes, Does the UNCT participate in this mechanism?" />
            <Dimension table="YesNoTable" name="DOESUNCTSUPPORTDRREFFORTS" caption="Does the UNCT provide support to national disaster risk reduction (DRR) efforts?" />
            <Dimension table="YesNoTable" name="Are there any active coordination mechanisms in place with key partners such as the World Bank" caption="Are there any active coordination mechanisms in place with key partners such as the World Bank?" />
            <Dimension table="YesNoTable" name="Key partners" caption="Are there agreements/arrangements/initiatives with key partners (such as the World Bank and regional and sub-regional organizations like the African Union, IGAD, etc.) for crisis response?" />
            <Dimension table="YesNoTable" name="Interaction World Bank" caption="Is there regular interaction between the World Bank Country Director and UN Leadership at the country level?" />
            <Dimension table="YesNoTable" name="Do the World Bank and UN collaborate on upstream policy processes" caption="Do the World Bank and UN collaborate on upstream policy processes?" />
            <Dimension table="YesNoTable" name="Joint risk assessments" caption="Are there any joint risk assessments undertaken (other than related to HACT)?" />
            <Dimension table="YesNoTable" name="Joint initiatives to manage risks" caption="Are there any joint initiatives to manage risks?" />
            <Dimension table="YesNoTable" name="UNDAF elements to sustaining peace peacebuilding" caption="Does the UNDAF explicitly incorporate elements relating to sustaining peace / peacebuilding?" />
            <Dimension table="YesNoTable" name="UNCT strategies or plans in place" caption="Does the UNCT have other strategies or plans in place (e.g. separate strategy on sustaining peace)?" />
            <Dimension table="YesNoTable" name="National mechanisms to coordinate development and peacebuilding efforts" caption="Are there national mechanisms to coordinate development and peacebuilding efforts that are supported by the UNCT?" />
            <Dimension table="YesNoTable" name="Ongoing humanitarian crisis" caption="Is/Was there an ongoing humanitarian crisis in your country within the last year?" />
            <Dimension table="YesNoTable" name="UN Humanitarian Coordinator" caption="UN Humanitarian Coordinator (HC)" />
            <Dimension table="YesNoTable" name="Humanitarian Country Team" caption="Humanitarian Country Team (HCT)" />
            <Dimension table="YesNoTable" name="Humanitarian Response Plan" caption="Humanitarian Response Plan (HRP)" />
            
            <Dimension name="Other humanitarian structures or mechanisms" caption="Other humanitarian structures or mechanisms" table="CP9GeneralCube" key="Dimension Id" visible="true">
                <Attributes>
					<Attribute name="Dimension Id" keyColumn="ID"
                               hasHierarchy="false"
                               levelType="Regular" datatype="Integer"/>
                    <Attribute name="Other humanitarian structures or mechanisms" caption="Other humanitarian structures or mechanisms"
                               keyColumn="HS_OTHER" hierarchyAllMemberName="All Other humanitarian structures or mechanisms"
                               hierarchyCaption="All Other humanitarian structures or mechanisms" levelType="Regular"
                               datatype="String" />
                </Attributes>
            </Dimension>

            <Dimension table="YesNoTable" name="Joint needs analysis" caption="Joint needs analysis" />
            <Dimension table="YesNoTable" name="Joint conflict analysis" caption="Joint conflict analysis" />
            <Dimension table="YesNoTable" name="Joint planning for collective outcomes" caption="Joint planning for collective outcomes" />
            <Dimension table="YesNoTable" name="Joint programming" caption="Joint programming" />
            <Dimension table="YesNoTable" name="Joint monitoring and evaluation" caption="Joint monitoring and evaluation" />
            <Dimension table="YesNoTable" name="Joint coordination mechanisms" caption="Joint coordination mechanisms" />
            <Dimension table="YesNoTable" name="Explicit link between ISF and UNDAF" caption="Is there an explicit link between the Integrated Strategic Framework and the UNDAF?" />
        </Dimensions>

        <MeasureGroups>
            <MeasureGroup name="CP9 General Cube Measures" table="CP9GeneralCube">
                <Measures>
                    <Measure name="Count" caption="Number of Country Records Submitted" column="ID" datatype="Integer"
                             aggregator="distinct-count" visible="true" formatString="#,###"/>

                    <Measure name="UNPeacekeeping" caption="Count of UN peacekeeping or special political mission" column="HASUNPEACE_KEEPING_MISSION"
                             datatype="Integer" aggregator="sum" visible="true" formatString="#,###"/>

                    <Measure name="hasIntegratedStrategicFramework" caption="Count of 'Is there an Integrated Strategic Framework (ISF)?'" column="HAS_INTEGRATED_STRATEGIC_FRAMEWORK"
                             datatype="Integer" aggregator="sum" visible="true" formatString="#,###"/>

                    <Measure name="hasJointStructuresUNCTUN" caption="Count of 'Are there joint structures in place between the UNCT and the UN Mission?'" column="HAS_JOINT_STRUCTURESUNCTUN"
                             datatype="Integer" aggregator="sum" visible="true" formatString="#,###"/>

                    <Measure name="developmentSupportedByPlanningUnit" caption="Count of 'Was the development and implementation of the ISF supported by a joint analytical planning unit including mission and country team?'" column="DEVELOPMENT_SUPPORTED_BY_PLANNING_UNIT"
                             datatype="Integer" aggregator="sum" visible="true" formatString="#,###"/>

                    <Measure name="hasMechanismsForMonitoring" caption="Count of 'Are there agreed upon mechanisms for the monitoring and evaluation of the ISF?'" column="HAS_MECHANISMS_FOR_MONITORING"
                             datatype="Integer" aggregator="sum" visible="true" formatString="#,###"/>

                    <Measure name="hasUNUNCTColaboration" caption="Count of 'Is there programmatic collaboration between the UN Mission and UNCT (including Joint Programmes/Programming)?'" column="HASUNUNCTCOLABORATION"
                             datatype="Integer" aggregator="sum" visible="true" formatString="#,###"/>

                    <Measure name="isJointProgramme" caption="Count of 'Is this in the form of a Joint Programme/Joint Programming?'" column="IS_JOINT_PROGRAMME"
                             datatype="Integer" aggregator="sum" visible="true" formatString="#,###"/>

                    <Measure name="hasCommonServicesToUNCTMembers" caption="Count of 'Does the UN Mission provide common services to UNCT members or vice versa?'" column="HAS_COMMON_SERVICES_TOUNCTMEMBERS"
                             datatype="Integer" aggregator="sum" visible="true" formatString="#,###"/>

                    <Measure name="isMemberOfJointUNCTCommunicationsGroup" caption="Count of 'Is the mission a member of the Joint UNCT Communications Group?'" column="IS_MEMBER_OF_JOINTUNCTCOMMUNICATIONS_GROUP"
                             datatype="Integer" aggregator="sum" visible="true" formatString="#,###"/>

                    <Measure name="isDrawdownWithdrawalUNMission" caption="Count of 'If there is a draw down and/or withdrawal of the UN Mission, has transition planning taken place jointly with the mission?'" column="IS_DRAWDOWN_WITHDRAWALUNMISSION"
                             datatype="Integer" aggregator="sum" visible="true" formatString="#,###"/>

                    <Measure name="hasAnalysisBeenTakenWithUN" caption="Count of 'Has the conflict analysis been undertaken together with the UN Mission?'" column="HAS_ANALYSIS_BEEN_TAKEN_WITHUN"
                             datatype="Integer" aggregator="sum" visible="true" formatString="#,###"/>

                    <Measure name="hasCountryMechanismsCoordinateIntlSupport" caption="Count of 'Are there mechanisms in place to coordinate UN efforts across the humanitarian, development and peace-building nexus?'" column="HAS_COUNTRY_MECHANISMS_COORDINATE_INTL_SUPPORT"
                             datatype="Integer" aggregator="sum" visible="true" formatString="#,###"/>

                    <Measure name="DisasterRiskReduction" caption="Count of operational Disaster Risk Reduction strategy" column="HAS_OPERATIONAL_DISASTER_RISK_REDUCTION_STRATEGY"
                             datatype="Integer" aggregator="sum" visible="true" formatString="#,###"/>

                    <Measure name="GOVERNMENT_MECHANISM_COORDINATEDRREFFORTS"
                             caption="Count of 'Does the government have a formal mechanism to coordinate DRR efforts with development partners, including the United Nations?'"
                             column="GOVERNMENT_MECHANISM_COORDINATEDRREFFORTS"
                             datatype="Integer" aggregator="sum" visible="true" formatString="#,###"/>

                    <Measure name="DOESUNCTPARTICIPATE"
                             caption="Count of 'If yes, Does the UNCT participate in this mechanism?'"
                             column="DOESUNCTPARTICIPATE"
                             datatype="Integer" aggregator="sum" visible="true" formatString="#,###"/>

                    <Measure name="DOESUNCTSUPPORTDRREFFORTS"
                             caption="Count of 'Does the UNCT provide support to national disaster risk reduction (DRR) efforts?'"
                             column="DOESUNCTSUPPORTDRREFFORTS"
                             datatype="Integer" aggregator="sum" visible="true" formatString="#,###"/>

                    <Measure name="KeyPartners" caption="Count of agreements/arrangements/initiatives with key partners (such as the World Bank)" column="HAS_AGREEMENTS_WITH_KEY_PARTNERS"
                             datatype="Integer" aggregator="sum" visible="true" formatString="#,###"/>

                    <Measure name="hasActiveCoordinationMechanisms" caption="Count of 'Are there any active coordination mechanisms in place with key partners such as the World Bank?'" column="HAS_ACTIVE_COORDINATION_MECHANISMS"
                             datatype="Integer" aggregator="sum" visible="true" formatString="#,###"/>

                    <Measure name="InteractionWorldBank" caption="Count of regular interaction between the World Bank Country Director and UN Leadership at the country level" column="HAS_INTERACTIONWBDIRECTORUNLEADER"
                             datatype="Integer" aggregator="sum" visible="true" formatString="#,###"/>

                    <Measure name="wbUNCollaborateOnUpstreamPolicy" caption="Count of 'Do the World Bank and UN collaborate on upstream policy processes?'" column="WBUNCOLLABORATE_ON_UPSTREAM_POLICY"
                             datatype="Integer" aggregator="sum" visible="true" formatString="#,###"/>

                    <Measure name="JointRiskAssessments" caption="Count of joint risk assessments undertaken (other than related to HACT)" column="HAS_JOINT_RISK_ASESSMENTS"
                             datatype="Integer" aggregator="sum" visible="true" formatString="#,###"/>

                    <Measure name="JointInitiativesManageRisks" caption="Count of joint initiatives to manage risks" column="HAS_JOINT_INITIATIVES_TO_MANAGE_RISKS"
                             datatype="Integer" aggregator="sum" visible="true" formatString="#,###"/>

                    <Measure name="UndafElementsToSustainingPeacePeacebuilding" caption="Count of 'Does the UNDAF explicitly incorporate elements relating to sustaining peace / peacebuilding?'" column="HAS_SUSTAINING_PEACE_ELEMENTS"
                             datatype="Integer" aggregator="sum" visible="true" formatString="#,###"/>

                    <Measure name="UnctStrategiesOrPlansInPlace" caption="Count of 'Does the UNCT have other strategies or plans in place (e.g. separate strategy on sustaining peace)?'" column="HAS_OTHER_STRATEGIES"
                             datatype="Integer" aggregator="sum" visible="true" formatString="#,###"/>

                    <Measure name="NationalMechanismsToCoordinateDevelopmentAndPeacebuildingEfforts" caption="Count of 'Are there national mechanisms to coordinate development and peacebuilding efforts that are supported by the UNCT?'" column="HAS_NATIONAL_MECHANISMS"
                             datatype="Integer" aggregator="sum" visible="true" formatString="#,###"/>

                    <Measure name="OngoingHumanitarianCrisis" caption="Count of 'Is/Was there an ongoing humanitarian crisis in your country within the last year?'" column="HAS_HUMANITARIAN_CRISIS"
                             datatype="Integer" aggregator="sum" visible="true" formatString="#,###"/>

                    <Measure name="UnHumanitarianCoordinator" caption="Count of 'UN Humanitarian Coordinator (HC)'" column="UN_COORDINATOR"
                             datatype="Integer" aggregator="sum" visible="true" formatString="#,###"/>

                    <Measure name="HumanitarianCountryTeam" caption="Count of 'Humanitarian Country Team (HCT)'" column="COUNTRY_TEAM"
                             datatype="Integer" aggregator="sum" visible="true" formatString="#,###"/>

                    <Measure name="HumanitarianResponsePlan" caption="Count of 'Humanitarian Response Plan (HRP)'" column="RESPONSE_PLAN"
                             datatype="Integer" aggregator="sum" visible="true" formatString="#,###"/>

                    <Measure name="OtherHumanitarianResponsePlan" caption="Count distinct of 'Other humanitarian structures or mechanisms'" column="HS_OTHER"
                             datatype="Integer" aggregator="distinct-count" visible="true" formatString="#,###"/>

                    <Measure name="JointNeedsAnalysis" caption="Count of 'Joint needs analysis'" column="NEEDS_ANALYSIS"
                             datatype="Integer" aggregator="sum" visible="true" formatString="#,###"/>

                    <Measure name="JointConflictAnalysis" caption="Count of 'Joint conflict analysis'" column="CONFLICT_ANALYSIS"
                             datatype="Integer" aggregator="sum" visible="true" formatString="#,###"/>

                    <Measure name="JointPlanningForCollectiveOutcomes" caption="Count of 'Joint planning for collective outcomes'" column="PLANNING_FOR_COLLECTIVE_OUTCOMES"
                             datatype="Integer" aggregator="sum" visible="true" formatString="#,###"/>

                    <Measure name="JointProgramming" caption="Count of 'Joint programming'" column="PROGRAMMING"
                             datatype="Integer" aggregator="sum" visible="true" formatString="#,###"/>

                    <Measure name="JointMonitoringAndEvaluation" caption="Count of 'Joint monitoring and evaluation'" column="MONITORING_AND_EVALUATION"
                             datatype="Integer" aggregator="sum" visible="true" formatString="#,###"/>

                    <Measure name="JointCoordinationMechanisms" caption="Count of 'Joint coordination mechanisms'" column="COORDINATION_MECHANISMS"
                             datatype="Integer" aggregator="sum" visible="true" formatString="#,###"/>

                    <Measure name="ExplicitLinkBetweenIsfAndUndaf" caption="Count of 'Is there an explicit link between the Integrated Strategic Framework and the UNDAF?'" column="HAS_FRAMEWORK_LINK"
                             datatype="Integer" aggregator="sum" visible="true" formatString="#,###"/>
                </Measures>
                <DimensionLinks>
                    <!-- ## _SHARED_DIMENSIONS_LINKS_TAG_ ## -->
                    <ForeignKeyLink dimension="UN peacekeeping"  foreignKeyColumn="HASUNPEACE_KEEPING_MISSION"/>
                    <ForeignKeyLink dimension="HasNewConflictAnalysis" foreignKeyColumn="HAS_NEW_CONFLICT_ANALYSIS_ID"/>
                    <ForeignKeyLink dimension="DevelopmentPlanningAligned" foreignKeyColumn="DEVELOPMENT_PLANNING_ALIGNED_ID"/>
                    <ForeignKeyLink dimension="Disaster Risk Reduction" foreignKeyColumn="HAS_OPERATIONAL_DISASTER_RISK_REDUCTION_STRATEGY"/>
                    <ForeignKeyLink dimension="Key partners" foreignKeyColumn="HAS_AGREEMENTS_WITH_KEY_PARTNERS"/>
                    <ForeignKeyLink dimension="Interaction World Bank" foreignKeyColumn="HAS_INTERACTIONWBDIRECTORUNLEADER"/>
                    <ForeignKeyLink dimension="Joint risk assessments" foreignKeyColumn="HAS_JOINT_RISK_ASESSMENTS"/>
                    <ForeignKeyLink dimension="Joint initiatives to manage risks" foreignKeyColumn="HAS_JOINT_INITIATIVES_TO_MANAGE_RISKS"/>
                    <FactLink dimension="Start Date" />
                    <FactLink dimension="End Date" />
                    <ForeignKeyLink dimension="Is the ISF regularly monitored and reported on" foreignKeyColumn="IS_NEW_MONITORED_AND_REPORTED_ID"/>
                    <ForeignKeyLink dimension="Is there an Integrated Strategic Framework (ISF)" foreignKeyColumn="HAS_INTEGRATED_STRATEGIC_FRAMEWORK"/>
                    <ForeignKeyLink dimension="Are there joint structures in place between the UNCT and the UN Mission" foreignKeyColumn="HAS_JOINT_STRUCTURESUNCTUN"/>
                    <ForeignKeyLink dimension="Was the development and implementation of the ISF supported by a joint analytical planning unit including mission and country team" foreignKeyColumn="DEVELOPMENT_SUPPORTED_BY_PLANNING_UNIT"/>
                    <ForeignKeyLink dimension="Are there agreed upon mechanisms for the monitoring and evaluation of the ISF" foreignKeyColumn="HAS_MECHANISMS_FOR_MONITORING"/>
                    <ForeignKeyLink dimension="Is there programmatic collaboration between the UN Mission and UNCT (including Joint Programmes/Programming)" foreignKeyColumn="HASUNUNCTCOLABORATION"/>
                    <ForeignKeyLink dimension="What type of programmatic collaboration" foreignKeyColumn="TYPE_JOINT_COLLABORATION_ID"/>
                    <ForeignKeyLink dimension="Does the UN Mission provide common services to UNCT members or vice versa" foreignKeyColumn="HAS_COMMON_SERVICES_TOUNCTMEMBERS"/>
                    <ForeignKeyLink dimension="Is the mission a member of the Joint UNCT Communications Group" foreignKeyColumn="IS_MEMBER_OF_JOINTUNCTCOMMUNICATIONS_GROUP"/>
                    <ForeignKeyLink dimension="If there is a draw down and/or withdrawal of the UN Mission, has transition planning taken place jointly with the mission" foreignKeyColumn="IS_DRAWDOWN_WITHDRAWALUNMISSION"/>
                    <ForeignKeyLink dimension="Has the conflict analysis been undertaken together with the UN Mission" foreignKeyColumn="HAS_ANALYSIS_BEEN_TAKEN_WITHUN"/>
                    <ForeignKeyLink dimension="Are there mechanisms in place to coordinate UN efforts across the humanitarian, development and peace-building nexus" foreignKeyColumn="HAS_COUNTRY_MECHANISMS_COORDINATE_INTL_SUPPORT"/>
                    <ForeignKeyLink dimension="Are there any active coordination mechanisms in place with key partners such as the World Bank" foreignKeyColumn="HAS_ACTIVE_COORDINATION_MECHANISMS"/>
                    <ForeignKeyLink dimension="Do the World Bank and UN collaborate on upstream policy processes" foreignKeyColumn="WBUNCOLLABORATE_ON_UPSTREAM_POLICY"/>
              		<ForeignKeyLink dimension="GOVERNMENT_MECHANISM_COORDINATEDRREFFORTS" foreignKeyColumn="WBUNCOLLABORATE_ON_UPSTREAM_POLICY"/>
              		<ForeignKeyLink dimension="DOESUNCTPARTICIPATE" foreignKeyColumn="WBUNCOLLABORATE_ON_UPSTREAM_POLICY"/>
              		<ForeignKeyLink dimension="DOESUNCTSUPPORTDRREFFORTS" foreignKeyColumn="WBUNCOLLABORATE_ON_UPSTREAM_POLICY"/>
                    <ForeignKeyLink dimension="UNDAF elements to sustaining peace peacebuilding" foreignKeyColumn="HAS_SUSTAINING_PEACE_ELEMENTS"/>
                    <ForeignKeyLink dimension="UNCT strategies or plans in place" foreignKeyColumn="HAS_OTHER_STRATEGIES"/>
                    <ForeignKeyLink dimension="National mechanisms to coordinate development and peacebuilding efforts" foreignKeyColumn="HAS_NATIONAL_MECHANISMS"/>
                    <ForeignKeyLink dimension="Ongoing humanitarian crisis" foreignKeyColumn="HAS_HUMANITARIAN_CRISIS"/>
                    <ForeignKeyLink dimension="UN Humanitarian Coordinator" foreignKeyColumn="UN_COORDINATOR"/>
                    <ForeignKeyLink dimension="Humanitarian Country Team" foreignKeyColumn="COUNTRY_TEAM"/>
                    <ForeignKeyLink dimension="Humanitarian Response Plan" foreignKeyColumn="RESPONSE_PLAN"/>
                    <ForeignKeyLink dimension="Other humanitarian structures or mechanisms" foreignKeyColumn="HS_OTHER"/>
                    <ForeignKeyLink dimension="Joint needs analysis" foreignKeyColumn="NEEDS_ANALYSIS"/>
                    <ForeignKeyLink dimension="Joint conflict analysis" foreignKeyColumn="CONFLICT_ANALYSIS"/>
                    <ForeignKeyLink dimension="Joint planning for collective outcomes" foreignKeyColumn="PLANNING_FOR_COLLECTIVE_OUTCOMES"/>
                    <ForeignKeyLink dimension="Joint programming" foreignKeyColumn="PROGRAMMING"/>
                    <ForeignKeyLink dimension="Joint monitoring and evaluation" foreignKeyColumn="MONITORING_AND_EVALUATION"/>
                    <ForeignKeyLink dimension="Joint coordination mechanisms" foreignKeyColumn="COORDINATION_MECHANISMS"/>
                    <ForeignKeyLink dimension="Explicit link between ISF and UNDAF" foreignKeyColumn="HAS_FRAMEWORK_LINK"/>
                </DimensionLinks>
            </MeasureGroup>
        </MeasureGroups>
    </Cube>
</Schema>